<!doctype html>
<html
  lang="en-US"
  data-theme="default">
  <head>
    <meta charset="utf-8" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />

<title>Image Rendering Test | Woke Soul&#39;s Blog</title>

<meta name="description" content="Testing the simple image rendering features" />
<meta name="keywords" content="test, image, rendering" />
<meta name="author" content="Woke Soul" />
<meta name="language" content="en-US" />

<meta name="robots" content="index, follow" />
<link rel="canonical" href="https://Walessong.github.io/posts/image-rendering-test/" />



  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />


<link rel="manifest" href="/site.webmanifest" />
<meta property="og:url" content="https://Walessong.github.io/posts/image-rendering-test/">
  <meta property="og:site_name" content="Woke Soul&#39;s Blog">
  <meta property="og:title" content="Image Rendering Test">
  <meta property="og:description" content="Testing the simple image rendering features">
  <meta property="og:locale" content="en_US">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-16T22:30:00+08:00">
    <meta property="article:modified_time" content="2024-01-16T22:30:00+08:00">
    <meta property="article:tag" content="Test">
    <meta property="article:tag" content="Image">
    <meta property="article:tag" content="Rendering">
    <meta property="og:image" content="https://Walessong.github.io/images/og-default.avif">


  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://Walessong.github.io/images/og-default.avif">
  <meta name="twitter:title" content="Image Rendering Test">
  <meta name="twitter:description" content="Testing the simple image rendering features">


  <meta itemprop="name" content="Image Rendering Test">
  <meta itemprop="description" content="Testing the simple image rendering features">
  <meta itemprop="datePublished" content="2024-01-16T22:30:00+08:00">
  <meta itemprop="dateModified" content="2024-01-16T22:30:00+08:00">
  <meta itemprop="wordCount" content="66">
  <meta itemprop="image" content="https://Walessong.github.io/images/og-default.avif">
  <meta itemprop="keywords" content="Test,Image,Rendering">








<script id="search-config" type="application/json">{"searchIndexURL": "\"/index.json\""}</script>















  




  





  
    
  

  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  




  
    
  

  
    
  

  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  









<script>

  window.HUGO_GALLERY_CONFIG = {
    justified_gallery:  true ,
    lightbox:  true ,
    justified: "{\"calculateitemsheight\":false,\"gutter\":30,\"lastrow\":\"center\",\"maxrowscount\":999999,\"resizedebounce\":100,\"rowheight\":300,\"rowheighttolerance\":0.25,\"transitionduration\":\"0.3s\"}",
    lightbox_options: "{\"descposition\":\"bottom\",\"draggable\":true,\"height\":\"80vh\",\"loop\":true,\"preload\":true,\"touchnavigation\":true,\"width\":\"80vw\",\"zoomable\":true}"
  };
</script>




  
    
      <link
        rel="stylesheet"
        href="/css/compiled.min.75915dfacf68ecd443c44b0b55007bab9c2ab8926f5bb0c3980e405d8d3cd236.css"
        integrity="sha256-dZFd&#43;s9o7NRDxEsLVQB7q5wquJJvW7DDmA5AXY080jY="
        crossorigin="anonymous" />
    
  





  
    
      <link
        rel="stylesheet"
        href="/css/chroma.min.491df36221f739b5948a747a0351f100ee7ccaaf466d9f46288bf06de1d59123.css"
        integrity="sha256-SR3zYiH3ObWUinR6A1HxAO58yq9GbZ9GKIvwbeHVkSM="
        crossorigin="anonymous" />
    
  





  
    
      <link
        rel="stylesheet"
        href="/css/custom/article-card-animations.min.688e5137e7a624116f3ccb89061dc4d2b63ab5546013fda59a2f732c4793db7a.css"
        integrity="sha256-aI5RN&#43;emJBFvPMuJBh3E0rY6tVRgE/2lmi9zLEeT23o="
        crossorigin="anonymous" />
    
  

  
    
      <link
        rel="stylesheet"
        href="/css/custom/article-cards.min.26ac840a3e11fbfbb9fa647be9ea485090137f7d689b7650f84409e1fa769948.css"
        integrity="sha256-JqyECj4R&#43;/u5&#43;mR76epIUJATf31om3ZQ&#43;EQJ4fp2mUg="
        crossorigin="anonymous" />
    
  

  
    
      <link
        rel="stylesheet"
        href="/css/custom/breadcrumb.min.60042a2fcb2947b3887b659e0a6647aa553a10e98e68e8c772d7101a367d2998.css"
        integrity="sha256-YAQqL8spR7OIe2WeCmZHqlU6EOmOaOjHctcQGjZ9KZg="
        crossorigin="anonymous" />
    
  

  
    
      <link
        rel="stylesheet"
        href="/css/custom/buttons.min.1a438374fb6fe9bf3bcf8cfcec4e0e9d94f5846c164642c5a43adf258029cc7e.css"
        integrity="sha256-GkODdPtv6b87z4z87E4OnZT1hGwWRkLFpDrfJYApzH4="
        crossorigin="anonymous" />
    
  

  
    
      <link
        rel="stylesheet"
        href="/css/custom/cards.min.27952cba28145f04eca3b90179c4a10455f461d03ee7051c6afad86588721864.css"
        integrity="sha256-J5UsuigUXwTso7kBecShBFX0YdA&#43;5wUcavrYZYhyGGQ="
        crossorigin="anonymous" />
    
  

  
    
      <link
        rel="stylesheet"
        href="/css/custom/code.min.2d5f82d0a43b568dce7d6b15a25adad0f721a0d2c9fbf197e5de92dfb1800bab.css"
        integrity="sha256-LV&#43;C0KQ7Vo3OfWsVolra0PchoNLJ&#43;/GX5d6S37GAC6s="
        crossorigin="anonymous" />
    
  

  
    
      <link
        rel="stylesheet"
        href="/css/custom/dark-mode.min.d4a8823c51f5248414b743dd934b50b778ed6a713f72ff7e14d88c63550bedfe.css"
        integrity="sha256-1KiCPFH1JIQUt0Pdk0tQt3jtanE/cv9&#43;FNiMY1UL7f4="
        crossorigin="anonymous" />
    
  

  
    
      <link
        rel="stylesheet"
        href="/css/custom/footer.min.30557b4de806f777a83d1d102dfe2cac331a9d270ea5f53b02b164543cc4153b.css"
        integrity="sha256-MFV7TegG93eoPR0QLf4srDManScOpfU7ArFkVDzEFTs="
        crossorigin="anonymous" />
    
  

  
    
      <link
        rel="stylesheet"
        href="/css/custom/grid.min.18b4dbb9c55d6f39455d2d9750a3939451ccc90a726db771c2333ec2d754e18b.css"
        integrity="sha256-GLTbucVdbzlFXS2XUKOTlFHMyQpybbdxwjM&#43;wtdU4Ys="
        crossorigin="anonymous" />
    
  

  
    
      <link
        rel="stylesheet"
        href="/css/custom/hero.min.4caf1596071d541523bd861e37cfcff5896f757de4f927753f82f43df258a889.css"
        integrity="sha256-TK8VlgcdVBUjvYYeN8/P9YlvdX3k&#43;Sd1P4L0PfJYqIk="
        crossorigin="anonymous" />
    
  

  
    
      <link
        rel="stylesheet"
        href="/css/custom/loading.min.5f3dcdde43efce21f36f9727a35599bb19fe12494d4c6dd9e1f860c1750069a1.css"
        integrity="sha256-Xz3N3kPvziHzb5cno1WZuxn&#43;EklNTG3Z4fhgwXUAaaE="
        crossorigin="anonymous" />
    
  

  
    
      <link
        rel="stylesheet"
        href="/css/custom/navigation.min.3d74f7adb51a773ebb396b458dd7298bb5bfaad0a0da0136f938ae18df31f043.css"
        integrity="sha256-PXT3rbUadz67OWtFjdcpi7W/qtCg2gE2&#43;TiuGN8x8EM="
        crossorigin="anonymous" />
    
  

  
    
      <link
        rel="stylesheet"
        href="/css/custom/scrollbar.min.e2c85a8ad645858cc0075ca49f7fca2ee562bc94e2818ae56c18756c97f83f34.css"
        integrity="sha256-4shaitZFhYzAB1ykn3/KLuVivJTigYrlbBh1bJf4PzQ="
        crossorigin="anonymous" />
    
  

  
    
      <link
        rel="stylesheet"
        href="/css/custom/search.min.4010e9d1c820eee4235afcca59d9b953da4bce67565842fee2c3cab41589a64f.css"
        integrity="sha256-QBDp0cgg7uQjWvzKWdm5U9pLzmdWWEL&#43;4sPKtBWJpk8="
        crossorigin="anonymous" />
    
  

  
    
      <link
        rel="stylesheet"
        href="/css/custom/sidebar.min.96e438d9498face2813dbb886f9d81e9860cfe2f0ed985fa7a138c11c706a6a9.css"
        integrity="sha256-luQ42UmPrOKBPbuIb52B6YYM/i8O2YX6ehOMEccGpqk="
        crossorigin="anonymous" />
    
  

  
    
      <link
        rel="stylesheet"
        href="/css/custom/tags.min.cbbe06e47d2e60b3be56d2af4b7e68308aaf6deca14d7a5a83b99d5db472320a.css"
        integrity="sha256-y74G5H0uYLO&#43;VtKvS35oMIqvbeyhTXpag7mdXbRyMgo="
        crossorigin="anonymous" />
    
  

  
    
      <link
        rel="stylesheet"
        href="/css/custom/toc.min.2eb4b3f4691bff4c54721f8e2f6a8c5807bf53c987d239e075b7e21a0e2c65ed.css"
        integrity="sha256-LrSz9Gkb/0xUch&#43;OL2qMWAe/U8mH0jngdbfiGg4sZe0="
        crossorigin="anonymous" />
    
  

  
    
      <link
        rel="stylesheet"
        href="/css/custom/welcome-page.min.5068dd8ad78c4c5949b5e1c2998b16daa343707192f848d9c5823df895870455.css"
        integrity="sha256-UGjditeMTFlJteHCmYsW2qNDcHGS&#43;EjZxYI9&#43;JWHBFU="
        crossorigin="anonymous" />
    
  




  <link rel="stylesheet" href="/css/fjGallery.css">



  <link rel="stylesheet" href="/css/glightbox.min.css">



        <script
          src="/js/main.57547673e75b789ac36b51c816e4ee0e4338dc5b5d2a922d7dcf4f948839a1cf.js"
          integrity="sha256-V1R2c&#43;dbeJrDa1HIFuTuDkM43FtdKpItfc9PlIg5oc8="
          crossorigin="anonymous"></script>


        <script
          src="/js/navigation-enhancements.eae98272657d2216adfbe5e1a29b5dc4f57b3f4953709377dc2aeda490fed2cf.js"
          integrity="sha256-6umCcmV9Ihat&#43;&#43;XhoptdxPV7P0lTcJN33CrtpJD&#43;0s8="
          crossorigin="anonymous"
          defer></script>


  <script src="/js/gumshoe.polyfills.min.js"></script>



          <script
            src="/js/toc.344256ca5501d8ca1ea93dbb56db8b33286ce44ccf9a93141c6fae95ba96aa7b.js"
            integrity="sha256-NEJWylUB2MoeqT27VtuLMyhs5EzPmpMUHG&#43;ulbqWqns="
            crossorigin="anonymous"
            defer></script>



        <script
          src="/js/search.de3eba3540834efb8328121784bff4774e06362412ee41eee665f5b4f987f393.js"
          integrity="sha256-3j66NUCDTvuDKBIXhL/0d04GNiQS7kHu5mX1tPmH85M="
          crossorigin="anonymous"
          defer></script>



        <script
          src="/js/dock.049193312ed73b6ffb0163645f5dca455988f73bb94f73fc28e7166ee49ddb7e.js"
          integrity="sha256-BJGTMS7XO2/7AWNkX13KRVmI9zu5T3P8KOcWbuSd234="
          crossorigin="anonymous"
          defer></script>





  <script src="/js/fjGallery.min.js"></script>



  <script src="/js/glightbox.min.js"></script>





  
    
  



  <script src="/js/macy.js"></script>
  




          <script
            src="/js/gallery.7e9426b9b7516ef4939b5fc1776413169ce49f783d8707189d65f87127c1b93d.js"
            integrity="sha256-fpQmubdRbvSTm1/Bd2QTFpzkn3g9hwcYnWX4cSfBuT0="
            crossorigin="anonymous"
            defer></script>






    <script>
      
        const theme = localStorage.getItem('theme') || 'system';
        const colorScheme = localStorage.getItem('colorScheme') || 'default';

        
        document.documentElement.setAttribute('data-theme', colorScheme);

        
        function applyTheme() {
          if (theme === 'dark' || (theme === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
          } else {
            document.documentElement.classList.remove('dark');
          }
        }

        applyTheme();

        
        if (theme === 'system') {
          window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', applyTheme);
        }
      })();
    </script>
  </head>

  <body class="min-h-screen antialiased transition-colors duration-500" style="background: #faf9f7 !important;">
    
    <div class="fixed inset-0 pointer-events-none">
      <div class="absolute inset-0 paper-texture"></div>
    </div>

    
    <nav id="macos-dock" class="fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50 transition-all duration-300 ease-out">
  <div class="dock-container flex items-center justify-center gap-2 px-4 py-3 rounded-[20px] bg-white/20 dark:bg-black/20 backdrop-blur-[30px] shadow-2xl" style="width: fit-content; margin: 0 auto;">
    
    
    <a href="/" class="dock-item group relative flex flex-col items-center" data-tooltip="Home">
      <div class="dock-icon-container relative">
        <div class="dock-icon w-8 h-8 rounded-xl bg-gradient-to-br from-blue-500 via-purple-500 to-indigo-600 flex items-center justify-center text-white text-sm font-bold shadow-md transition-all duration-300 ease-out group-hover:scale-150 group-hover:-translate-y-1 group-hover:shadow-xl">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/>
          </svg>
        </div>
        <div class="absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1.5 h-1.5 bg-blue-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      </div>
    </a>

    
    <a href="/posts" class="dock-item group relative flex flex-col items-center" data-tooltip="Posts">
      <div class="dock-icon-container relative">
        <div class="dock-icon w-8 h-8 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center text-white text-xs font-bold shadow-md transition-all duration-300 ease-out group-hover:scale-150 group-hover:-translate-y-1 group-hover:shadow-xl">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"/>
          </svg>
        </div>
        <div class="absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1.5 h-1.5 bg-emerald-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      </div>
    </a>

    
    <a href="/categories" class="dock-item group relative flex flex-col items-center" data-tooltip="Categories">
      <div class="dock-icon-container relative">
        <div class="dock-icon w-8 h-8 rounded-xl bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center text-white text-xs font-bold shadow-md transition-all duration-300 ease-out group-hover:scale-150 group-hover:-translate-y-1 group-hover:shadow-xl">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"/>
          </svg>
        </div>
        <div class="absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1.5 h-1.5 bg-orange-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      </div>
    </a>

    
    <a href="/tags" class="dock-item group relative flex flex-col items-center" data-tooltip="Tags">
      <div class="dock-icon-container relative">
        <div class="dock-icon w-8 h-8 rounded-xl bg-gradient-to-br from-pink-500 to-rose-500 flex items-center justify-center text-white text-xs font-bold shadow-md transition-all duration-300 ease-out group-hover:scale-150 group-hover:-translate-y-1 group-hover:shadow-xl">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/>
          </svg>
        </div>
        <div class="absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1.5 h-1.5 bg-pink-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      </div>
    </a>

    
    <a href="/archives" class="dock-item group relative flex flex-col items-center" data-tooltip="Archives">
      <div class="dock-icon-container relative">
        <div class="dock-icon w-8 h-8 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-xs font-bold shadow-md transition-all duration-300 ease-out group-hover:scale-150 group-hover:-translate-y-1 group-hover:shadow-xl">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path d="M4 3a2 2 0 100 4h12a2 2 0 100-4H4z"/>
            <path fill-rule="evenodd" d="M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" clip-rule="evenodd"/>
          </svg>
        </div>
        <div class="absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1.5 h-1.5 bg-indigo-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      </div>
    </a>

    
    <a href="/about" class="dock-item group relative flex flex-col items-center" data-tooltip="About">
      <div class="dock-icon-container relative">
        <div class="dock-icon w-8 h-8 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center text-white text-xs font-bold shadow-md transition-all duration-300 ease-out group-hover:scale-150 group-hover:-translate-y-1 group-hover:shadow-xl">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/>
          </svg>
        </div>
        <div class="absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1.5 h-1.5 bg-cyan-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      </div>
    </a>

    
    <button id="dock-search-btn" class="dock-item group relative flex flex-col items-center" data-tooltip="Search">
      <div class="dock-icon-container relative">
        <div class="dock-icon w-8 h-8 rounded-xl bg-gradient-to-br from-slate-600 to-slate-700 flex items-center justify-center text-white text-xs font-bold shadow-md transition-all duration-300 ease-out group-hover:scale-150 group-hover:-translate-y-1 group-hover:shadow-xl">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"/>
          </svg>
        </div>
        <div class="absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1.5 h-1.5 bg-slate-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      </div>
    </button>

    
    <button id="dock-theme-btn" class="dock-item group relative flex flex-col items-center" data-tooltip="Theme">
      <div class="dock-icon-container relative">
        <div class="dock-icon w-8 h-8 rounded-xl bg-gradient-to-br from-amber-500 to-yellow-500 flex items-center justify-center text-white text-xs font-bold shadow-md transition-all duration-300 ease-out group-hover:scale-150 group-hover:-translate-y-1 group-hover:shadow-xl">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"/>
          </svg>
        </div>
        <div class="absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1.5 h-1.5 bg-amber-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      </div>
    </button>
    </div>
</nav>


<div id="search-modal" class="fixed inset-0 z-[60] hidden">
  <div class="absolute inset-0 bg-black/20 dark:bg-black/40 backdrop-blur-sm transition-opacity duration-300" id="search-backdrop"></div>
  <div class="relative flex min-h-full items-center justify-center p-4">
    <div class="w-full max-w-2xl transform rounded-2xl bg-white/95 dark:bg-slate-900/95 backdrop-blur-xl border border-slate-200/60 dark:border-slate-700/60 shadow-2xl shadow-slate-900/20 transition-all duration-300 scale-95 opacity-0" id="search-container">
      <div class="p-6">
        <div class="flex items-center gap-3 mb-6">
          <span class="text-2xl"></span>
          <input type="text" id="search-input" placeholder="Search posts, tags, categories..." class="flex-1 bg-transparent text-lg text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400 outline-none border-none" />
          <button id="search-close" class="p-2 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
            <span class="text-lg"></span>
          </button>
        </div>
        <div id="search-results" class="space-y-3 max-h-96 overflow-y-auto"></div>
      </div>
    </div>
  </div>
</div>


<div id="reading-progress" class="fixed top-0 left-0 w-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-indigo-500 z-40 transition-all duration-200"></div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const dock = document.getElementById('macos-dock');
  const dockItems = dock.querySelectorAll('.dock-item');
  let isScrolling = false;
  let scrollTimeout;
  
  
  let mouseIdleTimer = null;
  let isMouseNearBottom = false;
  let isDockHovered = false;
  let autoHideDelay = 3000; 
  let bottomZoneHeight = 150; 

  
  function showDock() {
    if (dock) {
      dock.style.transform = 'translateX(-50%) translateY(0)';
      dock.style.opacity = '1';
      dock.style.pointerEvents = 'auto';
    }
  }

  
  function hideDock() {
    if (dock && !isDockHovered && !isMouseNearBottom) {
      dock.style.transform = 'translateX(-50%) translateY(100px)';
      dock.style.opacity = '0.3';
      dock.style.pointerEvents = 'none';
    }
  }

  
  function resetAutoHideTimer() {
    clearTimeout(mouseIdleTimer);
    mouseIdleTimer = setTimeout(() => {
      if (!isDockHovered && !isMouseNearBottom) {
        hideDock();
      }
    }, autoHideDelay);
  }

  
  function handleMouseMove(e) {
    const windowHeight = window.innerHeight;
    const mouseY = e.clientY;
    
    
    isMouseNearBottom = mouseY > windowHeight - bottomZoneHeight;
    
    if (isMouseNearBottom || isDockHovered) {
      showDock();
      resetAutoHideTimer();
    } else {
      resetAutoHideTimer();
    }
  }

  
  function handleScroll() {
    if (!isScrolling) {
      if (!isMouseNearBottom && !isDockHovered) {
        hideDock();
      }
    }
    
    clearTimeout(scrollTimeout);
    isScrolling = true;
    
    scrollTimeout = setTimeout(() => {
      isScrolling = false;
      if (isMouseNearBottom || isDockHovered) {
        showDock();
      }
      resetAutoHideTimer();
    }, 150);
  }

  
  let ticking = false;
  function updateScroll() {
    if (!ticking) {
      requestAnimationFrame(() => {
        handleScroll();
        ticking = false;
      });
      ticking = true;
    }
  }

  window.addEventListener('scroll', updateScroll, { passive: true });

  
  if (dock) {
    dock.addEventListener('mouseenter', function() {
      isDockHovered = true;
      showDock();
      clearTimeout(mouseIdleTimer);
    });

    dock.addEventListener('mouseleave', function() {
      isDockHovered = false;
      resetAutoHideTimer();
    });
  }

  
  window.addEventListener('mousemove', handleMouseMove);
  
  
  document.addEventListener('keydown', function() {
    showDock();
    resetAutoHideTimer();
  });

  
  window.addEventListener('focus', function() {
    resetAutoHideTimer();
  });

  
  setTimeout(() => {
    resetAutoHideTimer();
  }, 1000);

  
  dock.addEventListener('mousemove', function(e) {
    const rect = dock.getBoundingClientRect();
    const mouseX = e.clientX - rect.left;
    
    dockItems.forEach((item, index) => {
      const itemRect = item.getBoundingClientRect();
      const itemCenter = itemRect.left + itemRect.width / 2 - rect.left;
      const distance = Math.abs(mouseX - itemCenter);
      const maxDistance = 100;
      
      if (distance < maxDistance) {
        const scale = 1 + (1 - distance / maxDistance) * 0.5;
        const translateY = -(1 - distance / maxDistance) * 5;
        
        item.style.transform = `scale(${scale}) translateY(${translateY}px)`;
        item.style.zIndex = Math.round(100 - distance);
      } else {
        item.style.transform = 'scale(1) translateY(0px)';
        item.style.zIndex = '1';
      }
    });
  });
  
  
  dock.addEventListener('mouseleave', function() {
    dockItems.forEach(item => {
      item.style.transform = 'scale(1) translateY(0px)';
      item.style.zIndex = '1';
    });
  });
  
  
  dockItems.forEach(item => {
    item.addEventListener('mousedown', function() {
      this.style.transform = 'scale(0.9)';
    });
    
    item.addEventListener('mouseup', function() {
      this.style.transform = 'scale(1)';
    });
    
    item.addEventListener('mouseleave', function() {
      this.style.transform = 'scale(1)';
    });
  });

  
  const searchBtn = document.getElementById('dock-search-btn');
  const searchModal = document.getElementById('search-modal');
  const searchBackdrop = document.getElementById('search-backdrop');
  const searchContainer = document.getElementById('search-container');
  const searchInput = document.getElementById('search-input');
  const searchClose = document.getElementById('search-close');

  function openSearch() {
    searchModal.classList.remove('hidden');
    setTimeout(() => {
      searchContainer.classList.remove('scale-95', 'opacity-0');
      searchInput.focus();
    }, 10);
  }

  function closeSearch() {
    searchContainer.classList.add('scale-95', 'opacity-0');
    setTimeout(() => {
      searchModal.classList.add('hidden');
      searchInput.value = '';
    }, 300);
  }

  if (searchBtn) {
    searchBtn.addEventListener('click', openSearch);
  }
  
  if (searchClose) {
    searchClose.addEventListener('click', closeSearch);
  }

  if (searchBackdrop) {
    searchBackdrop.addEventListener('click', closeSearch);
  }
  
  
  document.addEventListener('keydown', function(e) {
    if (e.key === '/' && !e.ctrlKey && !e.metaKey && !e.altKey) {
      e.preventDefault();
      if (searchModal.classList.contains('hidden')) {
        openSearch();
      }
    }
    if (e.key === 'Escape' && !searchModal.classList.contains('hidden')) {
      closeSearch();
    }
  });

  
  const themeBtn = document.getElementById('dock-theme-btn');
  if (themeBtn) {
    themeBtn.addEventListener('click', function() {
      const html = document.documentElement;
      const currentTheme = html.classList.contains('dark') ? 'dark' : 'light';
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      
      if (newTheme === 'dark') {
        html.classList.add('dark');
        localStorage.setItem('theme', 'dark');
      } else {
        html.classList.remove('dark');
        localStorage.setItem('theme', 'light');
      }
      
      const icon = this.querySelector('.dock-icon');
      icon.textContent = newTheme === 'dark' ? '' : '';
    });
  }

  
  const progressBar = document.getElementById('reading-progress');
  if (progressBar) {
    window.addEventListener('scroll', () => {
      const scrollTop = window.pageYOffset;
      const docHeight = document.documentElement.scrollHeight - window.innerHeight;
      const scrollPercent = (scrollTop / docHeight) * 100;
      progressBar.style.width = scrollPercent + '%';
    });
  }

});
</script>

<style>
 
#macos-dock {
  position: fixed !important;
  bottom: 1.5rem !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  z-index: 50 !important;
  user-select: none;
  transition: all 0.3s ease-out;
  width: fit-content !important;
  height: auto !important;
}

.dock-container {
  height: 60px;
  backdrop-filter: blur(30px);
  -webkit-backdrop-filter: blur(30px);
  background: rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.3),
    inset 0 -1px 0 rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease-out;
  border: none;
  width: fit-content !important;
  margin: 0 auto !important;
}

.dock-item {
  cursor: pointer;
  transition: all 0.3s ease-out;
  position: relative;
  width: 32px;
  height: 32px;
  margin: 0 4px !important;
  flex-shrink: 0 !important;
}

.dock-icon-container {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  height: 100%;
}

.dock-icon {
  width: 32px;
  height: 32px;
  transition: all 0.3s ease-out;
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 
    0 4px 12px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.dock-item:hover .dock-icon {
  width: 48px;
  height: 48px;
  box-shadow: 
    0 8px 25px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.dock-item:active .dock-icon {
  transform: scale(0.9);
}

 
.dark .dock-container {
  background: rgba(0, 0, 0, 0.2);
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.15),
    inset 0 -1px 0 rgba(0, 0, 0, 0.2);
  border: none;
}

 
#search-modal {
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

#search-container {
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
}

#search-input::placeholder {
  font-size: 1rem;
}

#search-results::-webkit-scrollbar {
  width: 6px;
}

#search-results::-webkit-scrollbar-track {
  background: transparent;
}

#search-results::-webkit-scrollbar-thumb {
  background: rgba(148, 163, 184, 0.3);
  border-radius: 3px;
}

.dark #search-results::-webkit-scrollbar-thumb {
  background: rgba(71, 85, 105, 0.5);
}

 
#reading-progress {
  box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
}


 
html {
  scroll-behavior: smooth;
}

 
body {
  padding-bottom: 100px;
}

 
@media (max-width: 768px) {
  #macos-dock {
    bottom: 0.5rem !important;
    height: 60px;
  }
  
  .dock-container {
    height: 60px;
    padding: 8px 12px;
    gap: 8px;
  }
  
  .dock-item {
    width: 28px;
    height: 28px;
  }
  
  .dock-icon {
    width: 28px;
    height: 28px;
    font-size: 12px;
  }
  
  .dock-item:hover .dock-icon {
    width: 40px;
    height: 40px;
  }
  
  body {
    padding-bottom: 80px;
  }
}

@media (max-width: 480px) {
  .dock-container {
    gap: 6px;
    padding: 6px 10px;
  }
  
  .dock-item {
    width: 24px;
    height: 24px;
  }
  
  .dock-icon {
    width: 24px;
    height: 24px;
    font-size: 10px;
  }
  
  .dock-item:hover .dock-icon {
    width: 36px;
    height: 36px;
  }
}
</style>


    
    <main class="relative mx-auto w-full max-w-screen-2xl px-4 md:px-6 lg:px-8 py-8 md:py-12 pb-24">
      
<article class="max-w-4xl mx-auto">
  
  <nav
  class="breadcrumb mb-4 md:mb-6 py-1"
  aria-label="Breadcrumb navigation">
  <ol class="text-muted-foreground flex items-center space-x-1 md:space-x-2 text-sm overflow-x-auto whitespace-nowrap scrollbar-hide py-3 px-6 bg-white/20 dark:bg-black/30 rounded-2xl border border-white/30 dark:border-white/20 shadow-xl hover:shadow-2xl transition-all duration-300 ease-out hover:bg-white/30 dark:hover:bg-black/40">
    
    <li class="flex-shrink-0">
      <a
        href="/"
        class="text-muted-foreground hover:text-primary hover:bg-primary/20 flex items-center gap-0.5 md:gap-1 rounded-xl px-2 md:px-4 py-1 md:py-2 transition-all duration-300 ease-out hover:-translate-y-1 hover:scale-105 hover:shadow-lg">
        
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="Home">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m3 12 2-2m0 0 7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />

</svg>
        <span class="max-w-[4rem] md:max-w-none truncate">Home</span>
      </a>
    </li>

    
    
      <li class="flex items-center gap-1 md:gap-2 min-w-0">
        <span class="text-muted-foreground/40 flex-shrink-0 transition-colors duration-300"
          >
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
</svg>
        </span>

        
          
          <div class="flex items-center gap-1 md:gap-2 min-w-0">
            
              
              <a
                href="/posts"
                class="text-muted-foreground hover:text-primary hover:bg-primary/20 flex items-center gap-0.5 md:gap-1 rounded-xl px-2 md:px-4 py-1 md:py-2 transition-all duration-300 ease-out hover:-translate-y-1 hover:scale-105 hover:shadow-lg flex-shrink-0">
                
                  
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z" />

</svg>
                  <span class="max-w-[3rem] md:max-w-none truncate">Posts</span>
                
              </a>
              <span class="text-muted-foreground/40 flex-shrink-0 transition-colors duration-300"
                >
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
</svg></span
              >
            
            
            <span class="text-foreground flex items-center gap-0.5 md:gap-1 font-medium min-w-0 flex-shrink-0 bg-primary/15 px-3 py-1.5 rounded-xl">
              
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
</svg>
              <span class="max-w-[8rem] md:max-w-[16rem] lg:max-w-none truncate">Image Rendering Test</span>
            </span>
          </div>
        
      </li>
    

  </ol>
</nav>


  
  <header class="mb-12 text-center">
    
    

    
    <h1 class="text-3xl md:text-5xl font-bold bg-gradient-to-r from-gray-900 via-blue-600 to-purple-600 dark:from-white dark:via-blue-400 dark:to-purple-400 bg-clip-text text-transparent mb-6 leading-tight">
      Image Rendering Test
    </h1>

    
    <div class="flex flex-wrap justify-center items-center gap-6 text-gray-600 dark:text-gray-400 mb-8">
      
      <div class="flex items-center space-x-2">
        <span class="text-blue-500">📅</span>
        <time datetime="2024-01-16" class="font-medium">
          2024年1月16日
        </time>
      </div>
      

      
      <div class="flex items-center space-x-2">
        <span class="text-green-500">⏱️</span>
        <span class="font-medium">1 分钟阅读</span>
      </div>
      

      
      <div class="flex items-center space-x-2">
        <span class="text-purple-500">📝</span>
        <span class="font-medium">66 字</span>
      </div>
      
    </div>

    
    
    <div class="flex flex-wrap justify-center gap-3 mb-8">
      
      <span class="px-4 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-sm font-medium rounded-full border border-blue-200 dark:border-blue-700 hover:bg-blue-200 dark:hover:bg-blue-800/50 transition-colors duration-300">
        #test
      </span>
      
      <span class="px-4 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-sm font-medium rounded-full border border-blue-200 dark:border-blue-700 hover:bg-blue-200 dark:hover:bg-blue-800/50 transition-colors duration-300">
        #image
      </span>
      
      <span class="px-4 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-sm font-medium rounded-full border border-blue-200 dark:border-blue-700 hover:bg-blue-200 dark:hover:bg-blue-800/50 transition-colors duration-300">
        #rendering
      </span>
      
            </div>
    

    
    
    <div class="max-w-3xl mx-auto">
      <p class="text-lg text-gray-600 dark:text-gray-300 leading-relaxed italic">
        "<h1 id="image-rendering-test">Image Rendering Test</h1>
<p>The Demo comes from <a href="https://www.lightgalleryjs.com/demos/thumbnails/">LightGallery</a>
All images are from <a href="https://unsplash.com/">Unsplash</a></p>
<h2 id="single-image">Single Image</h2>
<p>
<figure class="image-figure not-prose my-8" 
        data-lightbox-enabled="true"
        data-gallery-type="auto">
  <div class="image-container">
    
    <img
      src="/posts/image-rendering-test/bundle.avif"
      alt="https://unsplash.com/@danielleone)"
      title="Photo by - Daniel Leone"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/posts/image-rendering-test/bundle.avif"
      data-gallery-alt="https://unsplash.com/@danielleone)"
      data-gallery-title="Photo by - Daniel Leone" /></div>

  <figcaption class="image-caption">
      Photo by - Daniel Leone
    </figcaption></figure></p>
<h2 id="justified-gallery">Justified Gallery</h2>
<p>
<figure class="image-figure not-prose my-8" 
        data-lightbox-enabled="true"
        data-gallery-type="auto">
  <div class="image-container">
    
    <img
      src="/images/01.avif"
      alt="https://unsplash.com/@@tobbes_rd"
      title="Photo by - Tobias Rademacher"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/01.avif"
      data-gallery-alt="https://unsplash.com/@@tobbes_rd"
      data-gallery-title="Photo by - Tobias Rademacher" /></div>

  <figcaption class="image-caption">
      Photo by - Tobias Rademacher
    </figcaption></figure>

<figure class="image-figure not-prose my-8" 
        data-lightbox-enabled="true"
        data-gallery-type="auto">
  <div class="image-container">
    
    <img
      src="/images/02.avif"
      alt="https://unsplash.com/@therawhunter"
      title="Photo by - Massimiliano Morosinotto"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/02.avif"
      data-gallery-alt="https://unsplash.com/@therawhunter"
      data-gallery-title="Photo by - Massimiliano Morosinotto" /></div>

  <figcaption class="image-caption">
      Photo by - Massimiliano Morosinotto
    </figcaption></figure>

<figure class="image-figure not-prose my-8" 
        data-lightbox-enabled="true"
        data-gallery-type="auto">
  <div class="image-container">
    
    <img
      src="/images/03.avif"
      alt="https://unsplash.com/@thesaboo"
      title="Photo by - Sascha Bosshard"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/03.avif"
      data-gallery-alt="https://unsplash.com/@thesaboo"
      data-gallery-title="Photo by - Sascha Bosshard" /></div>

  <figcaption class="image-caption">
      Photo by - Sascha Bosshard
    </figcaption></figure>

<figure class="image-figure not-prose my-8" 
        data-lightbox-enabled="true"
        data-gallery-type="auto">
  <div class="image-container">
    
    <img
      src="/images/04.avif"
      alt="https://unsplash.com/@yusufevli"
      title="Photo by - Yusuf Evli"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/04.avif"
      data-gallery-alt="https://unsplash.com/@yusufevli"
      data-gallery-title="Photo by - Yusuf Evli" /></div>

  <figcaption class="image-caption">
      Photo by - Yusuf Evli
    </figcaption></figure>

<figure class="image-figure not-prose my-8" 
        data-lightbox-enabled="true"
        data-gallery-type="auto">
  <div class="image-container">
    
    <img
      src="/images/05.avif"
      alt="https://unsplash.com/@flovayn"
      title="Photo by - Jay Mantri"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/05.avif"
      data-gallery-alt="https://unsplash.com/@flovayn"
      data-gallery-title="Photo by - Jay Mantri" /></div>

  <figcaption class="image-caption">
      Photo by - Jay Mantri
    </figcaption></figure>

<figure class="image-figure not-prose my-8" 
        data-lightbox-enabled="true"
        data-gallery-type="auto">
  <div class="image-container">
    
    <img
      src="/images/06.avif"
      alt="https://unsplash.com/@flovayn"
      title="Photo by -  Florian van Duyn"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/06.avif"
      data-gallery-alt="https://unsplash.com/@flovayn"
      data-gallery-title="Photo by -  Florian van Duyn" /></div>

  <figcaption class="image-caption">
      Photo by -  Florian van Duyn
    </figcaption></figure>

<figure class="image-figure not-prose my-8" 
        data-lightbox-enabled="true"
        data-gallery-type="auto">
  <div class="image-container">
    
    <img
      src="/images/07.avif"
      alt="https://unsplash.com/@juanster"
      title="Photo by - Juan Davila"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/07.avif"
      data-gallery-alt="https://unsplash.com/@juanster"
      data-gallery-title="Photo by - Juan Davila" /></div>

  <figcaption class="image-caption">
      Photo by - Juan Davila
    </figcaption></figure>

<figure class="image-figure not-prose my-8" 
        data-lightbox-enabled="true"
        data-gallery-type="auto">
  <div class="image-container">
    
    <img
      src="/images/08.avif"
      alt="https://unsplash.com/@davidmarcu"
      title="Photo by - David Marcu"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/08.avif"
      data-gallery-alt="https://unsplash.com/@davidmarcu"
      data-gallery-title="Photo by - David Marcu" /></div>

  <figcaption class="image-caption">
      Photo by - David Marcu
    </figcaption></figure></p>"
      </p>
          </div>
    
  </header>

  
  

<div id="table-of-contents" class="toc-container fixed right-8 top-1/2 transform -translate-y-1/2 z-40 hidden lg:block">
  <div class="bg-white/85 dark:bg-gray-800/85 backdrop-blur-lg border border-gray-200/50 dark:border-gray-700/50 rounded-2xl p-6 shadow-lg max-w-xs">
    
    <div class="flex items-center space-x-2 mb-4 pb-3 border-b border-gray-200/50 dark:border-gray-700/50">
      <div class="w-6 h-6 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center">
        <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">
          <path d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1zM3 16a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"/>
        </svg>
      </div>
      <h3 class="text-sm font-semibold text-gray-900 dark:text-white">目录</h3>
    </div>
    
    
    <nav class="toc-nav">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#single-image">Single Image</a></li>
    <li><a href="#justified-gallery">Justified Gallery</a></li>
    <li><a href="#masonry-by-shortcodes">Masonry by shortcodes</a></li>
  </ul>
</nav>
    </nav>
  </div>
  
  
  <button id="toc-toggle" class="absolute -left-12 top-4 w-10 h-10 bg-white/85 dark:bg-gray-800/85 backdrop-blur-lg border border-gray-200/50 dark:border-gray-700/50 rounded-xl shadow-lg flex items-center justify-center text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-all duration-200">
    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
      <path d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1z"/>
    </svg>
  </button>
</div>


<style>
 
.toc-nav ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.toc-nav li {
  margin: 0.25rem 0;
}

.toc-nav a {
  display: block;
  padding: 0.25rem 0.5rem;
  border-radius: 0.5rem;
  color: #6b7280;
  text-decoration: none;
  font-size: 0.75rem;
  line-height: 1.5;
  transition: all 0.2s ease;
}

.dark .toc-nav a {
  color: #9ca3af;
}

.toc-nav a:hover {
  color: #3b82f6;
  background: rgba(59, 130, 246, 0.1);
}

.dark .toc-nav a:hover {
  color: #60a5fa;
  background: rgba(96, 165, 250, 0.15);
}

 
.toc-nav ul ul {
  margin-left: 0.75rem;
}

 
.toc-nav a.active {
  color: #3b82f6;
  background: rgba(59, 130, 246, 0.1);
  font-weight: 500;
}

.dark .toc-nav a.active {
  color: #60a5fa;
  background: rgba(96, 165, 250, 0.15);
}

 
.toc-container {
  transition: transform 0.3s ease, opacity 0.3s ease;
}

.toc-container.hidden-toc {
  transform: translateX(100%) translateY(-50%);
  opacity: 0;
  pointer-events: none;
}

 
@media (max-width: 1024px) {
  .toc-container {
    display: none !important;
  }
}

 
.toc-nav {
  max-height: 60vh;
  overflow-y: auto;
}

.toc-nav::-webkit-scrollbar {
  width: 4px;
}

.toc-nav::-webkit-scrollbar-track {
  background: transparent;
}

.toc-nav::-webkit-scrollbar-thumb {
  background: rgba(59, 130, 246, 0.3);
  border-radius: 2px;
}

.toc-nav::-webkit-scrollbar-thumb:hover {
  background: rgba(59, 130, 246, 0.5);
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const toc = document.getElementById('table-of-contents');
  const tocToggle = document.getElementById('toc-toggle');
  const tocLinks = document.querySelectorAll('.toc-link');
  
  if (!toc || !tocToggle) return;
  
  let isVisible = true;
  
  
  tocToggle.addEventListener('click', function() {
    isVisible = !isVisible;
    if (isVisible) {
      toc.classList.remove('hidden-toc');
    } else {
      toc.classList.add('hidden-toc');
    }
  });
  
  
  tocLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const targetId = this.getAttribute('href').substring(1);
      const targetElement = document.getElementById(targetId);
      
      if (targetElement) {
        const offsetTop = targetElement.offsetTop - 100; 
        window.scrollTo({
          top: offsetTop,
          behavior: 'smooth'
        });
      }
    });
  });
  
  
  function updateActiveSection() {
    const headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');
    const tocLinks = document.querySelectorAll('.toc-nav a');
    const scrollTop = window.pageYOffset;
    
    let currentSection = null;
    
    headings.forEach(heading => {
      const offsetTop = heading.offsetTop - 150;
      if (scrollTop >= offsetTop) {
        currentSection = heading;
      }
    });
    
    
    tocLinks.forEach(link => link.classList.remove('active'));
    
    
    if (currentSection) {
      const currentId = currentSection.id;
      const activeLink = document.querySelector(`.toc-nav a[href="#${currentId}"]`);
      if (activeLink) {
        activeLink.classList.add('active');
      }
    }
  }
  
  
  let ticking = false;
  window.addEventListener('scroll', function() {
    if (!ticking) {
      requestAnimationFrame(function() {
        updateActiveSection();
        ticking = false;
      });
      ticking = true;
    }
  });
  
  
  updateActiveSection();
});
</script>



  
  <div class="prose prose-lg prose-gray dark:prose-invert max-w-none">
    
    <div class="relative">
      
      <div class="absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-blue-500 via-purple-500 to-pink-500 rounded-full opacity-20"></div>
      
      
      <div class="pl-8">
        <h1 id="image-rendering-test">Image Rendering Test</h1>
<p>The Demo comes from <a href="https://www.lightgalleryjs.com/demos/thumbnails/">LightGallery</a>
All images are from <a href="https://unsplash.com/">Unsplash</a></p>
<h2 id="single-image">Single Image</h2>
<p>
<figure class="image-figure not-prose my-8" 
        data-lightbox-enabled="true"
        data-gallery-type="auto">
  <div class="image-container">
    
    <img
      src="/posts/image-rendering-test/bundle.avif"
      alt="https://unsplash.com/@danielleone)"
      title="Photo by - Daniel Leone"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/posts/image-rendering-test/bundle.avif"
      data-gallery-alt="https://unsplash.com/@danielleone)"
      data-gallery-title="Photo by - Daniel Leone" /></div>

  <figcaption class="image-caption">
      Photo by - Daniel Leone
    </figcaption></figure></p>
<h2 id="justified-gallery">Justified Gallery</h2>
<p>
<figure class="image-figure not-prose my-8" 
        data-lightbox-enabled="true"
        data-gallery-type="auto">
  <div class="image-container">
    
    <img
      src="/images/01.avif"
      alt="https://unsplash.com/@@tobbes_rd"
      title="Photo by - Tobias Rademacher"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/01.avif"
      data-gallery-alt="https://unsplash.com/@@tobbes_rd"
      data-gallery-title="Photo by - Tobias Rademacher" /></div>

  <figcaption class="image-caption">
      Photo by - Tobias Rademacher
    </figcaption></figure>

<figure class="image-figure not-prose my-8" 
        data-lightbox-enabled="true"
        data-gallery-type="auto">
  <div class="image-container">
    
    <img
      src="/images/02.avif"
      alt="https://unsplash.com/@therawhunter"
      title="Photo by - Massimiliano Morosinotto"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/02.avif"
      data-gallery-alt="https://unsplash.com/@therawhunter"
      data-gallery-title="Photo by - Massimiliano Morosinotto" /></div>

  <figcaption class="image-caption">
      Photo by - Massimiliano Morosinotto
    </figcaption></figure>

<figure class="image-figure not-prose my-8" 
        data-lightbox-enabled="true"
        data-gallery-type="auto">
  <div class="image-container">
    
    <img
      src="/images/03.avif"
      alt="https://unsplash.com/@thesaboo"
      title="Photo by - Sascha Bosshard"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/03.avif"
      data-gallery-alt="https://unsplash.com/@thesaboo"
      data-gallery-title="Photo by - Sascha Bosshard" /></div>

  <figcaption class="image-caption">
      Photo by - Sascha Bosshard
    </figcaption></figure>

<figure class="image-figure not-prose my-8" 
        data-lightbox-enabled="true"
        data-gallery-type="auto">
  <div class="image-container">
    
    <img
      src="/images/04.avif"
      alt="https://unsplash.com/@yusufevli"
      title="Photo by - Yusuf Evli"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/04.avif"
      data-gallery-alt="https://unsplash.com/@yusufevli"
      data-gallery-title="Photo by - Yusuf Evli" /></div>

  <figcaption class="image-caption">
      Photo by - Yusuf Evli
    </figcaption></figure>

<figure class="image-figure not-prose my-8" 
        data-lightbox-enabled="true"
        data-gallery-type="auto">
  <div class="image-container">
    
    <img
      src="/images/05.avif"
      alt="https://unsplash.com/@flovayn"
      title="Photo by - Jay Mantri"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/05.avif"
      data-gallery-alt="https://unsplash.com/@flovayn"
      data-gallery-title="Photo by - Jay Mantri" /></div>

  <figcaption class="image-caption">
      Photo by - Jay Mantri
    </figcaption></figure>

<figure class="image-figure not-prose my-8" 
        data-lightbox-enabled="true"
        data-gallery-type="auto">
  <div class="image-container">
    
    <img
      src="/images/06.avif"
      alt="https://unsplash.com/@flovayn"
      title="Photo by -  Florian van Duyn"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/06.avif"
      data-gallery-alt="https://unsplash.com/@flovayn"
      data-gallery-title="Photo by -  Florian van Duyn" /></div>

  <figcaption class="image-caption">
      Photo by -  Florian van Duyn
    </figcaption></figure>

<figure class="image-figure not-prose my-8" 
        data-lightbox-enabled="true"
        data-gallery-type="auto">
  <div class="image-container">
    
    <img
      src="/images/07.avif"
      alt="https://unsplash.com/@juanster"
      title="Photo by - Juan Davila"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/07.avif"
      data-gallery-alt="https://unsplash.com/@juanster"
      data-gallery-title="Photo by - Juan Davila" /></div>

  <figcaption class="image-caption">
      Photo by - Juan Davila
    </figcaption></figure>

<figure class="image-figure not-prose my-8" 
        data-lightbox-enabled="true"
        data-gallery-type="auto">
  <div class="image-container">
    
    <img
      src="/images/08.avif"
      alt="https://unsplash.com/@davidmarcu"
      title="Photo by - David Marcu"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/08.avif"
      data-gallery-alt="https://unsplash.com/@davidmarcu"
      data-gallery-title="Photo by - David Marcu" /></div>

  <figcaption class="image-caption">
      Photo by - David Marcu
    </figcaption></figure></p>
<h2 id="masonry-by-shortcodes">Masonry by shortcodes</h2>

<style>
  
#masonry-c1d43776464336f5f652c1b24ba73691-1 {
  width: 100%;
}

#masonry-c1d43776464336f5f652c1b24ba73691-1 .masonry-container {
  width: 100%;
  position: relative;
}

#masonry-c1d43776464336f5f652c1b24ba73691-1 .masonry-item {
  display: inline-block;
  width: 100%;
  margin-bottom: 15px;
  break-inside: avoid;
  box-sizing: border-box;
}

#masonry-c1d43776464336f5f652c1b24ba73691-1 .masonry-item img {
  width: 100%;
  height: auto;
  display: block;
  transition: transform 0.3s ease-in-out;
  border-radius: 0.5rem;
}

#masonry-c1d43776464336f5f652c1b24ba73691-1 .glightbox {
  display: block;
  text-decoration: none;
  overflow: hidden;
  cursor: pointer;
  border-radius: 0.5rem;
}

#masonry-c1d43776464336f5f652c1b24ba73691-1 .glightbox:hover,
#masonry-c1d43776464336f5f652c1b24ba73691-1 .glightbox:focus {
  text-decoration: none;
  outline: none;
}

#masonry-c1d43776464336f5f652c1b24ba73691-1 .masonry-item:hover img {
  transform: scale(1.05);
}

#masonry-c1d43776464336f5f652c1b24ba73691-1 .masonry-item {
  overflow: hidden;
  border-radius: 0.5rem;
}
</style>

<div class="masonry-gallery" 
     id="masonry-c1d43776464336f5f652c1b24ba73691-1"
     data-columns="4"
     data-gutter="15"
     data-animate="true"
     data-use-transform="true"
     data-center="true"
     data-max-columns="5"
     data-lightbox="true">

  <div class="masonry-container">
    <div class="masonry-item"><a href="/images/01.avif" 
             class="glightbox"
             data-gallery="masonry-c1d43776464336f5f652c1b24ba73691-1"data-description="<h4>Photo by - Tobias Rademacher</h4><p>https://unsplash.com/@@tobbes_rd</p>">
            
            
    <img
      src="/images/01.avif"
      alt="https://unsplash.com/@@tobbes_rd"
      title="Photo by - Tobias Rademacher"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/01.avif"
      data-gallery-alt="https://unsplash.com/@@tobbes_rd"
      data-gallery-title="Photo by - Tobias Rademacher" /></a></div><div class="masonry-item"><a href="/images/02.avif" 
             class="glightbox"
             data-gallery="masonry-c1d43776464336f5f652c1b24ba73691-1"data-description="<h4>Photo by - Massimiliano Morosinotto</h4><p>https://unsplash.com/@therawhunter</p>">
            
            
    <img
      src="/images/02.avif"
      alt="https://unsplash.com/@therawhunter"
      title="Photo by - Massimiliano Morosinotto"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/02.avif"
      data-gallery-alt="https://unsplash.com/@therawhunter"
      data-gallery-title="Photo by - Massimiliano Morosinotto" /></a></div><div class="masonry-item"><a href="/images/03.avif" 
             class="glightbox"
             data-gallery="masonry-c1d43776464336f5f652c1b24ba73691-1"data-description="<h4>Photo by - Sascha Bosshard</h4><p>https://unsplash.com/@thesaboo</p>">
            
            
    <img
      src="/images/03.avif"
      alt="https://unsplash.com/@thesaboo"
      title="Photo by - Sascha Bosshard"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/03.avif"
      data-gallery-alt="https://unsplash.com/@thesaboo"
      data-gallery-title="Photo by - Sascha Bosshard" /></a></div><div class="masonry-item"><a href="/images/04.avif" 
             class="glightbox"
             data-gallery="masonry-c1d43776464336f5f652c1b24ba73691-1"data-description="<h4>Photo by - Yusuf Evli</h4><p>https://unsplash.com/@yusufevli</p>">
            
            
    <img
      src="/images/04.avif"
      alt="https://unsplash.com/@yusufevli"
      title="Photo by - Yusuf Evli"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/04.avif"
      data-gallery-alt="https://unsplash.com/@yusufevli"
      data-gallery-title="Photo by - Yusuf Evli" /></a></div><div class="masonry-item"><a href="/images/05.avif" 
             class="glightbox"
             data-gallery="masonry-c1d43776464336f5f652c1b24ba73691-1"data-description="<h4>Photo by - Jay Mantri</h4><p>https://unsplash.com/@flovayn</p>">
            
            
    <img
      src="/images/05.avif"
      alt="https://unsplash.com/@flovayn"
      title="Photo by - Jay Mantri"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/05.avif"
      data-gallery-alt="https://unsplash.com/@flovayn"
      data-gallery-title="Photo by - Jay Mantri" /></a></div><div class="masonry-item"><a href="/images/06.avif" 
             class="glightbox"
             data-gallery="masonry-c1d43776464336f5f652c1b24ba73691-1"data-description="<h4>Photo by -  Florian van Duyn</h4><p>https://unsplash.com/@flovayn</p>">
            
            
    <img
      src="/images/06.avif"
      alt="https://unsplash.com/@flovayn"
      title="Photo by -  Florian van Duyn"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/06.avif"
      data-gallery-alt="https://unsplash.com/@flovayn"
      data-gallery-title="Photo by -  Florian van Duyn" /></a></div><div class="masonry-item"><a href="/images/07.avif" 
             class="glightbox"
             data-gallery="masonry-c1d43776464336f5f652c1b24ba73691-1"data-description="<h4>Photo by - Juan Davila</h4><p>https://unsplash.com/@juanster</p>">
            
            
    <img
      src="/images/07.avif"
      alt="https://unsplash.com/@juanster"
      title="Photo by - Juan Davila"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/07.avif"
      data-gallery-alt="https://unsplash.com/@juanster"
      data-gallery-title="Photo by - Juan Davila" /></a></div><div class="masonry-item"><a href="/images/08.avif" 
             class="glightbox"
             data-gallery="masonry-c1d43776464336f5f652c1b24ba73691-1"data-description="<h4>Photo by - David Marcu</h4><p>https://unsplash.com/@davidmarcu</p>">
            
            
    <img
      src="/images/08.avif"
      alt="https://unsplash.com/@davidmarcu"
      title="Photo by - David Marcu"
      
      loading="lazy"
      decoding="async"
      data-gallery-src="/images/08.avif"
      data-gallery-alt="https://unsplash.com/@davidmarcu"
      data-gallery-title="Photo by - David Marcu" /></a></div></div>
</div>


<script>
(function() {
  const containerId = 'masonry-c1d43776464336f5f652c1b24ba73691-1';
  const config = {
    columns:  4 ,
    gutter:  15 ,
    maxColumns:  5 ,
    lightbox:  true ,
    animate: "true",
    useTransform: "true",
    center: "true"
  };
  
  console.log('Initializing masonry gallery:', containerId, config);
  
  function initMasonryGallery() {
    const container = document.getElementById(containerId);
    if (!container) {
      console.error('Masonry container not found:', containerId);
      return;
    }
    
    const masonryContainer = container.querySelector('.masonry-container');
    if (!masonryContainer) {
      console.error('Masonry inner container not found');
      return;
    }
    
    
    if (typeof Macy === 'undefined') {
      console.error('Macy.js not loaded');
      return;
    }
    
    console.log('Found container and Macy, initializing...');
    
    
    try {
      const macyInstance = Macy({
        container: masonryContainer,
        trueOrder: false,
        waitForImages: true,
        useOwnImageLoader: false,
        debug: false,
        mobileFirst: true,
        columns: config.columns,
        margin: {
          x: config.gutter,
          y: config.gutter
        },
        breakAt: {
          1400: Math.min(config.maxColumns, config.columns),
          1200: Math.min(config.maxColumns, config.columns),
          940: Math.min(config.maxColumns, config.columns),  
          768: Math.min(3, config.columns),
          520: Math.min(2, config.columns),
          400: 1
        }
      });
      
      console.log('Macy initialized successfully for', containerId);
      
      
      const images = masonryContainer.querySelectorAll('img');
      let loadedImages = 0;
      const totalImages = images.length;
      
      function onImageLoad() {
        loadedImages++;
        console.log(`Image ${loadedImages}/${totalImages} loaded`);
        
        if (loadedImages === totalImages) {
          setTimeout(() => {
            if (macyInstance && macyInstance.reCalculate) {
              macyInstance.reCalculate(true);
              console.log('Macy layout recalculated after all images loaded');
            }
          }, 100);
        }
      }
      
      images.forEach(img => {
        if (img.complete) {
          onImageLoad();
        } else {
          img.addEventListener('load', onImageLoad);
          img.addEventListener('error', onImageLoad);
        }
      });
      
    } catch (error) {
      console.error('Error initializing Macy:', error);
    }
    
    
    if (config.lightbox) {
      if (typeof GLightbox !== 'undefined') {
        try {
          
          let globalLightboxConfig = window.HUGO_GALLERY_CONFIG?.lightbox_options || {};
          
          if (typeof globalLightboxConfig === 'string') {
            try {
              globalLightboxConfig = JSON.parse(globalLightboxConfig);
            } catch (e) {
              console.error('Error parsing masonry GLightbox config:', e);
              globalLightboxConfig = {};
            }
          }          
          const lightbox = GLightbox({
            selector: `#${containerId} .glightbox`,
            touchNavigation: globalLightboxConfig.touchnavigation ?? globalLightboxConfig.touchNavigation ?? true,
            loop: globalLightboxConfig.loop ?? true,
            draggable: globalLightboxConfig.draggable ?? true,
            zoomable: globalLightboxConfig.zoomable ?? true,
            preload: globalLightboxConfig.preload ?? true,
            width: globalLightboxConfig.width || '90vw',
            height: globalLightboxConfig.height || '90vh',
            descPosition: globalLightboxConfig.descposition || globalLightboxConfig.descPosition || 'bottom',
            onOpen: () => {
              console.log('GLightbox opened for', containerId);
            }
          });
          
          console.log('GLightbox initialized successfully for', containerId, 'with global config');
          
        } catch (error) {
          console.error('Error initializing GLightbox:', error);
        }
      } else {
        console.error('GLightbox not loaded but lightbox is enabled');
      }
    }
  }
  
  
  function waitForLibraries() {
    let attempts = 0;
    const maxAttempts = 50;
    
    function check() {
      attempts++;
      
      const macyReady = typeof Macy !== 'undefined';
      const lightboxReady = !config.lightbox || typeof GLightbox !== 'undefined';
      
      if (macyReady && lightboxReady) {
        initMasonryGallery();
      } else if (attempts < maxAttempts) {
        setTimeout(check, 100);
      } else {
        console.error('Timeout waiting for libraries. Macy:', macyReady, 'GLightbox:', lightboxReady);
      }
    }
    
    check();
  }
  
  
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', waitForLibraries);
  } else {
    setTimeout(waitForLibraries, 50);
  }
})();
</script>

      </div>
    </div>
  </div>

  
  <footer class="mt-16 pt-8 border-t border-gray-200/50 dark:border-gray-700/50">
    
    <div class="flex flex-wrap justify-center gap-4 mb-8">
      <button class="group inline-flex items-center space-x-2 px-6 py-3 bg-blue-500 text-white font-medium rounded-xl hover:bg-blue-600 transform hover:scale-105 hover:shadow-lg transition-all duration-300">
        <span>📤</span>
        <span>分享文章</span>
      </button>
      
      <button class="group inline-flex items-center space-x-2 px-6 py-3 bg-green-500 text-white font-medium rounded-xl hover:bg-green-600 transform hover:scale-105 hover:shadow-lg transition-all duration-300">
        <span>💬</span>
        <span>发表评论</span>
      </button>
    </div>

    
    
    <div class="bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-2xl p-6 text-center">
      <div class="flex items-center justify-center space-x-4 mb-4">
        
        <img 
          src="/images/avatar.svg" 
          alt="Woke Soul"
          class="w-16 h-16 rounded-full border-4 border-blue-200 dark:border-blue-700"
        />
        
        
        <div class="text-left">
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
            Woke Soul
          </h3>
          
          <p class="text-gray-600 dark:text-gray-400 text-sm">
            A Student of BUAA
          </p>
          
            </div>
          </div>
      
      
      <p class="text-gray-600 dark:text-gray-300 text-sm leading-relaxed">
        free and inquisitive, I love to learn and explore new things.
      </p>
      
    </div>
    
  </footer>
</article>



<nav class="max-w-4xl mx-auto mt-16">
  <div class="grid gap-6 md:grid-cols-2">
    
    <a href="/posts/code-highlighting-test/" class="group bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-2xl p-6 hover:shadow-xl hover:shadow-gray-900/10 transition-all duration-500 hover:-translate-y-1 hover:scale-105">
      <div class="flex items-center space-x-4">
        <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center text-white text-lg font-bold group-hover:scale-110 transition-transform duration-300">
          ←
        </div>
        <div>
          <p class="text-sm text-gray-500 dark:text-gray-400 mb-1">上一篇</p>
          <h3 class="font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300">
            Code Highlighting Test
          </h3>
            </div>
          </div>
    </a>
    

    
    <a href="/posts/katex-and-mermaid-test/" class="group bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-2xl p-6 hover:shadow-xl hover:shadow-gray-900/10 transition-all duration-500 hover:-translate-y-1 hover:scale-105">
      <div class="flex items-center space-x-4">
        <div class="ml-auto">
          <p class="text-sm text-gray-500 dark:text-gray-400 mb-1 text-right">下一篇</p>
          <h3 class="font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300">
            KaTeX and Mermaid Test
          </h3>
        </div>
        <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center text-white text-lg font-bold group-hover:scale-110 transition-transform duration-300">
          →
        </div>
      </div>
    </a>
    
  </div>
</nav>





<section class="max-w-4xl mx-auto mt-16">
  <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-8 text-center">
    相关文章
  </h2>
  
  <div class="grid gap-6 md:grid-cols-3">
    
    <a href="/posts/code-highlighting-test/" class="group bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-2xl p-4 hover:shadow-xl hover:shadow-gray-900/10 transition-all duration-500 hover:-translate-y-1 hover:scale-105">
      <h3 class="font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300 mb-2">
        Code Highlighting Test
      </h3>
      
      <p class="text-gray-600 dark:text-gray-400 text-sm line-clamp-2">
        <h1 id="code-highlighting-test">Code Highlighting Test</h1>
<p>This article is used to test the new code highlighting feature, including syntax highlighting, copy button, language display, etc.</p>
<h2 id="javascript">JavaScript</h2>
<div
  class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md">
  
  <div
    class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3">
    
    <div class="flex items-center gap-2">
      <div class="text-muted-foreground flex-shrink-0">
        
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
</svg>
      </div>
      <span class="text-muted-foreground text-sm font-medium">
        JAVASCRIPT
      </span>
    </div>

    
    <div class="flex items-center gap-2">
      
      <button
        class="toggle-linenos-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 hidden sm:inline-flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none"
        data-code-id="code-0"
        title="切换行号"
        aria-label="切换行号">
        <span class="linenumber-icon">
          
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24">
  <line x1="8" x2="21" y1="6" y2="6"/>
  <line x1="8" x2="21" y1="12" y2="12"/>
  <line x1="8" x2="21" y1="18" y2="18"/>
  <line x1="3" x2="3.01" y1="6" y2="6"/>
  <line x1="3" x2="3.01" y1="12" y2="12"/>
  <line x1="3" x2="3.01" y1="18" y2="18"/>

</svg>
        </span>
        <span class="linenumber-text hidden md:inline">行号</span>
      </button>

      <button
          class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none"
          data-code-id="code-0"
          data-default-state="expanded"
          data-collapsed="false"
          data-auto-collapse-lines="30"
          data-auto-collapse-height="400"
          data-collapsed-height="120"
          title="Collapse"
          aria-label="Collapse">
          <span class="collapse-icon">
            
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>
          </span>
          <span class="collapse-text hidden sm:inline"
            >Collapse</span
          >
        </button>
      <button
        class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none"
        data-code-id="code-0"
        title="Copy"
        aria-label="Copy">
        <span class="copy-icon">
          
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>
        </span>
        <span class="copy-text hidden sm:inline"
          >Copy</span
        >
      </button>
    </div>
  </div>

  
  <div class="code-block-content relative" id="code-0">
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="ln"> 1</span><span class="cl">
</span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="kd">function</span> <span class="nx">fibonacci</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="nx">n</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">  <span class="k">return</span> <span class="nx">fibonacci</span><span class="p">(</span><span class="nx">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="nx">fibonacci</span><span class="p">(</span><span class="nx">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">
</span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">fibonacci</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`The 10th Fibonacci number is: </span><span class="si">${</span><span class="nx">result</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">
</span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="c1">// Async/Await
</span></span></span><span class="line"><span class="ln">12</span><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">asyncFunction</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl">  <span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">14</span><span class="cl">    <span class="kr">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/api/data&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">15</span><span class="cl">    <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">16</span><span class="cl">    <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl">  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">18</span><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Error fetching data:&#39;</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">19</span><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="ln">20</span><span class="cl"><span class="p">};</span></span></span></code></pre></div>
    
    <div
      class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300">
      <div
        class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">
        Click to expand and view more
      </div>
    </div>
  </div>
</div>


<script>
(function() {
  const codeId = 'code-0';
  const copyBtn = document.querySelector('.copy-code-btn[data-code-id="' + codeId + '"]');
  const collapseBtn = document.querySelector('.collapse-code-btn[data-code-id="' + codeId + '"]');
  const toggleLinenosBtn = document.querySelector('.toggle-linenos-btn[data-code-id="' + codeId + '"]');
  const codeContainer = document.getElementById(codeId);

  if (!codeContainer) return;

  
  if (toggleLinenosBtn) {
    toggleLinenosBtn.addEventListener('click', function() {
      codeContainer.classList.toggle('no-linenos');
    });
  }

  
  if (copyBtn) {
    const copyIcon = copyBtn.querySelector('.copy-icon');
    const copyText = copyBtn.querySelector('.copy-text');

    copyBtn.addEventListener('click', async function() {
      try {
        let codeText = '';
        const codeTableCell = codeContainer.querySelector('.lntd:last-child code');
        if (codeTableCell) {
          codeText = codeTableCell.textContent || codeTableCell.innerText;
        } else {
          const codeElement = codeContainer.querySelector('code');
          if (codeElement) {
            const hasInlineLineNumbers = codeElement.querySelector('.ln');
            if (hasInlineLineNumbers) {
              const codeLines = codeElement.querySelectorAll('.cl');
              if (codeLines.length > 0) {
                codeText = Array.from(codeLines)
                  .map(line => (line.textContent || line.innerText).replace(/\n+$/, ''))
                  .join('\n').replace(/\n+$/, '');
              } else {
                const allText = codeElement.textContent || codeElement.innerText;
                codeText = allText.replace(/^\d+/gm, '').replace(/^\s+/gm, '');
              }
            } else {
              codeText = codeElement.textContent || codeElement.innerText;
            }
          } else {
            codeText = codeContainer.textContent || codeContainer.innerText;
          }
        }
        codeText = codeText.trim();
        await navigator.clipboard.writeText(codeText);
        copyIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M5 13l4 4L19 7\u0022 \/\u003e\n\u003c\/svg\u003e`;
        if (copyText) copyText.textContent = 'Copied';
        copyBtn.classList.add('text-green-600');
        setTimeout(() => {
          copyIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\u0022 \/\u003e\n\u003c\/svg\u003e`;
          if (copyText) copyText.textContent = 'Copy';
          copyBtn.classList.remove('text-green-600');
        }, 2000);
      } catch (err) {
        console.error('复制失败:', err);
      }
    });
  }

  
  if (collapseBtn) {
    const collapseIcon = collapseBtn.querySelector('.collapse-icon');
    const collapseText = collapseBtn.querySelector('.collapse-text');
    const collapseOverlay = codeContainer.querySelector('.collapse-overlay');

    let codeElement = codeContainer.querySelector('pre.chroma');
    if (!codeElement) codeElement = codeContainer.querySelector('pre');

    const defaultState = collapseBtn.dataset.defaultState || 'expanded';
    const isCollapsedAttr = collapseBtn.dataset.collapsed === 'true';
    const autoCollapseLines = parseInt(collapseBtn.dataset.autoCollapseLines) || 30;
    const autoCollapseHeight = parseInt(collapseBtn.dataset.autoCollapseHeight) || 400;
    const collapsedHeight = parseInt(collapseBtn.dataset.collapsedHeight) || 120;

    let isCollapsed = false;

    function initCollapse() {
      const shouldCollapse = isCollapsedAttr || defaultState === 'collapsed' || shouldAutoCollapse();
      if (shouldCollapse) setCollapsed(true, false);
    }
    function shouldAutoCollapse() {
      if (codeElement) {
        const lines = codeElement.querySelectorAll('.line, .cl');
        const height = codeElement.offsetHeight;
        return lines.length > autoCollapseLines || height > autoCollapseHeight;
      }
      const containerHeight = codeContainer.offsetHeight;
      if (containerHeight > autoCollapseHeight) return true;
      const textContent = codeContainer.textContent || codeContainer.innerText || '';
      const estimatedLines = textContent.split('\n').length;
      return estimatedLines > autoCollapseLines;
    }
    function setCollapsed(collapsed, animate = true) {
      if (!collapseOverlay) return;
      isCollapsed = collapsed;
      if (collapsed) {
        codeContainer.style.maxHeight = collapsedHeight + 'px';
        codeContainer.style.overflow = 'hidden';
        collapseOverlay.style.opacity = '1';
        collapseOverlay.style.pointerEvents = 'auto';
        collapseIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M19 9l-7 7-7-7\u0022 \/\u003e\n\u003c\/svg\u003e`;
        if (collapseText) collapseText.textContent = 'Expand';
        collapseBtn.title = 'Expand';
      } else {
        codeContainer.style.maxHeight = '';
        codeContainer.style.overflow = '';
        collapseOverlay.style.opacity = '0';
        collapseOverlay.style.pointerEvents = 'none';
        collapseIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath fill=\u0022currentColor\u0022 d=\u0022M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z\u0022\/\u003e\u003c\/svg\u003e`;
        if (collapseText) collapseText.textContent = 'Collapse';
        collapseBtn.title = 'Collapse';
      }
      if (animate) {
        codeContainer.style.transition = 'max-height 0.3s ease-out';
        setTimeout(() => { codeContainer.style.transition = ''; }, 300);
      }
    }
    function toggleCollapse() { setCollapsed(!isCollapsed, true); }
    collapseBtn.addEventListener('click', toggleCollapse);
    if (collapseOverlay) collapseOverlay.addEventListener('click', () => { if (isCollapsed) setCollapsed(false, true); });
    initCollapse();
  }
})();
</script>

<h2 id="codeblock-with-line-numbers">Codeblock with Line Numbers</h2>
<div
  class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md">
  
  <div
    class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3">
    
    <div class="flex items-center gap-2">
      <div class="text-muted-foreground flex-shrink-0">
        
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
</svg>
      </div>
      <span class="text-muted-foreground text-sm font-medium">
        PYTHON
      </span>
    </div>

    
    <div class="flex items-center gap-2">
      
      <button
        class="toggle-linenos-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 hidden sm:inline-flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none"
        data-code-id="code-1"
        title="切换行号"
        aria-label="切换行号">
        <span class="linenumber-icon">
          
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24">
  <line x1="8" x2="21" y1="6" y2="6"/>
  <line x1="8" x2="21" y1="12" y2="12"/>
  <line x1="8" x2="21" y1="18" y2="18"/>
  <line x1="3" x2="3.01" y1="6" y2="6"/>
  <line x1="3" x2="3.01" y1="12" y2="12"/>
  <line x1="3" x2="3.01" y1="18" y2="18"/>

</svg>
        </span>
        <span class="linenumber-text hidden md:inline">行号</span>
      </button>

      <button
          class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none"
          data-code-id="code-1"
          data-default-state="expanded"
          data-collapsed="false"
          data-auto-collapse-lines="30"
          data-auto-collapse-height="400"
          data-collapsed-height="120"
          title="Collapse"
          aria-label="Collapse">
          <span class="collapse-icon">
            
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>
          </span>
          <span class="collapse-text hidden sm:inline"
            >Collapse</span
          >
        </button>
      <button
        class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none"
        data-code-id="code-1"
        title="Copy"
        aria-label="Copy">
        <span class="copy-icon">
          
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>
        </span>
        <span class="copy-text hidden sm:inline"
          >Copy</span
        >
      </button>
    </div>
  </div>

  
  <div class="code-block-content relative" id="code-1">
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="c1"># Python with line numbers</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="kn">import</span> <span class="nn">asyncio</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">
</span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="k">class</span> <span class="nc">DataProcessor</span><span class="p">:</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]):</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">        <span class="s2">&#34;&#34;&#34;Process the data and return the result&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl">            <span class="k">return</span> <span class="kc">None</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl">
</span></span><span class="line"><span class="ln">14</span><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">15</span><span class="cl">            <span class="s1">&#39;total&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">),</span>
</span></span><span class="line"><span class="ln">16</span><span class="cl">            <span class="s1">&#39;processed&#39;</span><span class="p">:</span> <span class="p">[]</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="ln">18</span><span class="cl">
</span></span><span class="line"><span class="ln">19</span><span class="cl">        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
</span></span><span class="line"><span class="ln">20</span><span class="cl">            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_item</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
</span></span><span class="line"><span class="ln">21</span><span class="cl">                <span class="n">result</span><span class="p">[</span><span class="s1">&#39;processed&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">22</span><span class="cl">
</span></span><span class="line"><span class="ln">23</span><span class="cl">        <span class="k">return</span> <span class="n">result</span></span></span></code></pre></div>
    
    <div
      class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300">
      <div
        class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">
        Click to expand and view more
      </div>
    </div>
  </div>
</div>


<script>
(function() {
  const codeId = 'code-1';
  const copyBtn = document.querySelector('.copy-code-btn[data-code-id="' + codeId + '"]');
  const collapseBtn = document.querySelector('.collapse-code-btn[data-code-id="' + codeId + '"]');
  const toggleLinenosBtn = document.querySelector('.toggle-linenos-btn[data-code-id="' + codeId + '"]');
  const codeContainer = document.getElementById(codeId);

  if (!codeContainer) return;

  
  if (toggleLinenosBtn) {
    toggleLinenosBtn.addEventListener('click', function() {
      codeContainer.classList.toggle('no-linenos');
    });
  }

  
  if (copyBtn) {
    const copyIcon = copyBtn.querySelector('.copy-icon');
    const copyText = copyBtn.querySelector('.copy-text');

    copyBtn.addEventListener('click', async function() {
      try {
        let codeText = '';
        const codeTableCell = codeContainer.querySelector('.lntd:last-child code');
        if (codeTableCell) {
          codeText = codeTableCell.textContent || codeTableCell.innerText;
        } else {
          const codeElement = codeContainer.querySelector('code');
          if (codeElement) {
            const hasInlineLineNumbers = codeElement.querySelector('.ln');
            if (hasInlineLineNumbers) {
              const codeLines = codeElement.querySelectorAll('.cl');
              if (codeLines.length > 0) {
                codeText = Array.from(codeLines)
                  .map(line => (line.textContent || line.innerText).replace(/\n+$/, ''))
                  .join('\n').replace(/\n+$/, '');
              } else {
                const allText = codeElement.textContent || codeElement.innerText;
                codeText = allText.replace(/^\d+/gm, '').replace(/^\s+/gm, '');
              }
            } else {
              codeText = codeElement.textContent || codeElement.innerText;
            }
          } else {
            codeText = codeContainer.textContent || codeContainer.innerText;
          }
        }
        codeText = codeText.trim();
        await navigator.clipboard.writeText(codeText);
        copyIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M5 13l4 4L19 7\u0022 \/\u003e\n\u003c\/svg\u003e`;
        if (copyText) copyText.textContent = 'Copied';
        copyBtn.classList.add('text-green-600');
        setTimeout(() => {
          copyIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\u0022 \/\u003e\n\u003c\/svg\u003e`;
          if (copyText) copyText.textContent = 'Copy';
          copyBtn.classList.remove('text-green-600');
        }, 2000);
      } catch (err) {
        console.error('复制失败:', err);
      }
    });
  }

  
  if (collapseBtn) {
    const collapseIcon = collapseBtn.querySelector('.collapse-icon');
    const collapseText = collapseBtn.querySelector('.collapse-text');
    const collapseOverlay = codeContainer.querySelector('.collapse-overlay');

    let codeElement = codeContainer.querySelector('pre.chroma');
    if (!codeElement) codeElement = codeContainer.querySelector('pre');

    const defaultState = collapseBtn.dataset.defaultState || 'expanded';
    const isCollapsedAttr = collapseBtn.dataset.collapsed === 'true';
    const autoCollapseLines = parseInt(collapseBtn.dataset.autoCollapseLines) || 30;
    const autoCollapseHeight = parseInt(collapseBtn.dataset.autoCollapseHeight) || 400;
    const collapsedHeight = parseInt(collapseBtn.dataset.collapsedHeight) || 120;

    let isCollapsed = false;

    function initCollapse() {
      const shouldCollapse = isCollapsedAttr || defaultState === 'collapsed' || shouldAutoCollapse();
      if (shouldCollapse) setCollapsed(true, false);
    }
    function shouldAutoCollapse() {
      if (codeElement) {
        const lines = codeElement.querySelectorAll('.line, .cl');
        const height = codeElement.offsetHeight;
        return lines.length > autoCollapseLines || height > autoCollapseHeight;
      }
      const containerHeight = codeContainer.offsetHeight;
      if (containerHeight > autoCollapseHeight) return true;
      const textContent = codeContainer.textContent || codeContainer.innerText || '';
      const estimatedLines = textContent.split('\n').length;
      return estimatedLines > autoCollapseLines;
    }
    function setCollapsed(collapsed, animate = true) {
      if (!collapseOverlay) return;
      isCollapsed = collapsed;
      if (collapsed) {
        codeContainer.style.maxHeight = collapsedHeight + 'px';
        codeContainer.style.overflow = 'hidden';
        collapseOverlay.style.opacity = '1';
        collapseOverlay.style.pointerEvents = 'auto';
        collapseIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M19 9l-7 7-7-7\u0022 \/\u003e\n\u003c\/svg\u003e`;
        if (collapseText) collapseText.textContent = 'Expand';
        collapseBtn.title = 'Expand';
      } else {
        codeContainer.style.maxHeight = '';
        codeContainer.style.overflow = '';
        collapseOverlay.style.opacity = '0';
        collapseOverlay.style.pointerEvents = 'none';
        collapseIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath fill=\u0022currentColor\u0022 d=\u0022M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z\u0022\/\u003e\u003c\/svg\u003e`;
        if (collapseText) collapseText.textContent = 'Collapse';
        collapseBtn.title = 'Collapse';
      }
      if (animate) {
        codeContainer.style.transition = 'max-height 0.3s ease-out';
        setTimeout(() => { codeContainer.style.transition = ''; }, 300);
      }
    }
    function toggleCollapse() { setCollapsed(!isCollapsed, true); }
    collapseBtn.addEventListener('click', toggleCollapse);
    if (collapseOverlay) collapseOverlay.addEventListener('click', () => { if (isCollapsed) setCollapsed(false, true); });
    initCollapse();
  }
})();
</script>

<h2 id="highlighting-specific-lines">Highlighting Specific Lines</h2>
<div
  class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md">
  
  <div
    class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3">
    
    <div class="flex items-center gap-2">
      <div class="text-muted-foreground flex-shrink-0">
        
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
</svg>
      </div>
      <span class="text-muted-foreground text-sm font-medium">
        GO
      </span>
    </div>

    
    <div class="flex items-center gap-2">
      
      <button
        class="toggle-linenos-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 hidden sm:inline-flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none"
        data-code-id="code-2"
        title="切换行号"
        aria-label="切换行号">
        <span class="linenumber-icon">
          
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24">
  <line x1="8" x2="21" y1="6" y2="6"/>
  <line x1="8" x2="21" y1="12" y2="12"/>
  <line x1="8" x2="21" y1="18" y2="18"/>
  <line x1="3" x2="3.01" y1="6" y2="6"/>
  <line x1="3" x2="3.01" y1="12" y2="12"/>
  <line x1="3" x2="3.01" y1="18" y2="18"/>

</svg>
        </span>
        <span class="linenumber-text hidden md:inline">行号</span>
      </button>

      <button
          class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none"
          data-code-id="code-2"
          data-default-state="expanded"
          data-collapsed="false"
          data-auto-collapse-lines="30"
          data-auto-collapse-height="400"
          data-collapsed-height="120"
          title="Collapse"
          aria-label="Collapse">
          <span class="collapse-icon">
            
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>
          </span>
          <span class="collapse-text hidden sm:inline"
            >Collapse</span
          >
        </button>
      <button
        class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none"
        data-code-id="code-2"
        title="Copy"
        aria-label="Copy">
        <span class="copy-icon">
          
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>
        </span>
        <span class="copy-text hidden sm:inline"
          >Copy</span
        >
      </button>
    </div>
  </div>

  
  <div class="code-block-content relative" id="code-2">
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nx">main</span><span class="w">
</span></span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="w">
</span></span></span><span class="line hl"><span class="ln"> 3</span><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="s">&#34;fmt&#34;</span><span class="w">  </span><span class="c1">// This line will be highlighted</span><span class="w">
</span></span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line hl"><span class="ln"> 6</span><span class="cl"><span class="w">    </span><span class="nx">message</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="s">&#34;Hello, World!&#34;</span><span class="w">  </span><span class="c1">// This line will also be highlighted</span><span class="w">
</span></span></span><span class="line"><span class="ln"> 7</span><span class="cl"><span class="w">
</span></span></span><span class="line hl"><span class="ln"> 8</span><span class="cl"><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span><span class="w">  </span><span class="c1">// This line will also be highlighted</span><span class="w">
</span></span></span><span class="line"><span class="ln"> 9</span><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Count: %d\n&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="ln">12</span><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="ln">13</span><span class="cl"><span class="w"></span><span class="p">}</span></span></span></code></pre></div>
    
    <div
      class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300">
      <div
        class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">
        Click to expand and view more
      </div>
    </div>
  </div>
</div>


<script>
(function() {
  const codeId = 'code-2';
  const copyBtn = document.querySelector('.copy-code-btn[data-code-id="' + codeId + '"]');
  const collapseBtn = document.querySelector('.collapse-code-btn[data-code-id="' + codeId + '"]');
  const toggleLinenosBtn = document.querySelector('.toggle-linenos-btn[data-code-id="' + codeId + '"]');
  const codeContainer = document.getElementById(codeId);

  if (!codeContainer) return;

  
  if (toggleLinenosBtn) {
    toggleLinenosBtn.addEventListener('click', function() {
      codeContainer.classList.toggle('no-linenos');
    });
  }

  
  if (copyBtn) {
    const copyIcon = copyBtn.querySelector('.copy-icon');
    const copyText = copyBtn.querySelector('.copy-text');

    copyBtn.addEventListener('click', async function() {
      try {
        let codeText = '';
        const codeTableCell = codeContainer.querySelector('.lntd:last-child code');
        if (codeTableCell) {
          codeText = codeTableCell.textContent || codeTableCell.innerText;
        } else {
          const codeElement = codeContainer.querySelector('code');
          if (codeElement) {
            const hasInlineLineNumbers = codeElement.querySelector('.ln');
            if (hasInlineLineNumbers) {
              const codeLines = codeElement.querySelectorAll('.cl');
              if (codeLines.length > 0) {
                codeText = Array.from(codeLines)
                  .map(line => (line.textContent || line.innerText).replace(/\n+$/, ''))
                  .join('\n').replace(/\n+$/, '');
              } else {
                const allText = codeElement.textContent || codeElement.innerText;
                codeText = allText.replace(/^\d+/gm, '').replace(/^\s+/gm, '');
              }
            } else {
              codeText = codeElement.textContent || codeElement.innerText;
            }
          } else {
            codeText = codeContainer.textContent || codeContainer.innerText;
          }
        }
        codeText = codeText.trim();
        await navigator.clipboard.writeText(codeText);
        copyIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M5 13l4 4L19 7\u0022 \/\u003e\n\u003c\/svg\u003e`;
        if (copyText) copyText.textContent = 'Copied';
        copyBtn.classList.add('text-green-600');
        setTimeout(() => {
          copyIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\u0022 \/\u003e\n\u003c\/svg\u003e`;
          if (copyText) copyText.textContent = 'Copy';
          copyBtn.classList.remove('text-green-600');
        }, 2000);
      } catch (err) {
        console.error('复制失败:', err);
      }
    });
  }

  
  if (collapseBtn) {
    const collapseIcon = collapseBtn.querySelector('.collapse-icon');
    const collapseText = collapseBtn.querySelector('.collapse-text');
    const collapseOverlay = codeContainer.querySelector('.collapse-overlay');

    let codeElement = codeContainer.querySelector('pre.chroma');
    if (!codeElement) codeElement = codeContainer.querySelector('pre');

    const defaultState = collapseBtn.dataset.defaultState || 'expanded';
    const isCollapsedAttr = collapseBtn.dataset.collapsed === 'true';
    const autoCollapseLines = parseInt(collapseBtn.dataset.autoCollapseLines) || 30;
    const autoCollapseHeight = parseInt(collapseBtn.dataset.autoCollapseHeight) || 400;
    const collapsedHeight = parseInt(collapseBtn.dataset.collapsedHeight) || 120;

    let isCollapsed = false;

    function initCollapse() {
      const shouldCollapse = isCollapsedAttr || defaultState === 'collapsed' || shouldAutoCollapse();
      if (shouldCollapse) setCollapsed(true, false);
    }
    function shouldAutoCollapse() {
      if (codeElement) {
        const lines = codeElement.querySelectorAll('.line, .cl');
        const height = codeElement.offsetHeight;
        return lines.length > autoCollapseLines || height > autoCollapseHeight;
      }
      const containerHeight = codeContainer.offsetHeight;
      if (containerHeight > autoCollapseHeight) return true;
      const textContent = codeContainer.textContent || codeContainer.innerText || '';
      const estimatedLines = textContent.split('\n').length;
      return estimatedLines > autoCollapseLines;
    }
    function setCollapsed(collapsed, animate = true) {
      if (!collapseOverlay) return;
      isCollapsed = collapsed;
      if (collapsed) {
        codeContainer.style.maxHeight = collapsedHeight + 'px';
        codeContainer.style.overflow = 'hidden';
        collapseOverlay.style.opacity = '1';
        collapseOverlay.style.pointerEvents = 'auto';
        collapseIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M19 9l-7 7-7-7\u0022 \/\u003e\n\u003c\/svg\u003e`;
        if (collapseText) collapseText.textContent = 'Expand';
        collapseBtn.title = 'Expand';
      } else {
        codeContainer.style.maxHeight = '';
        codeContainer.style.overflow = '';
        collapseOverlay.style.opacity = '0';
        collapseOverlay.style.pointerEvents = 'none';
        collapseIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath fill=\u0022currentColor\u0022 d=\u0022M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z\u0022\/\u003e\u003c\/svg\u003e`;
        if (collapseText) collapseText.textContent = 'Collapse';
        collapseBtn.title = 'Collapse';
      }
      if (animate) {
        codeContainer.style.transition = 'max-height 0.3s ease-out';
        setTimeout(() => { codeContainer.style.transition = ''; }, 300);
      }
    }
    function toggleCollapse() { setCollapsed(!isCollapsed, true); }
    collapseBtn.addEventListener('click', toggleCollapse);
    if (collapseOverlay) collapseOverlay.addEventListener('click', () => { if (isCollapsed) setCollapsed(false, true); });
    initCollapse();
  }
})();
</script>

<h2 id="codeblock-with-filename">Codeblock with Filename</h2>
<div
  class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md">
  
  <div
    class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3">
    
    <div class="flex items-center gap-2">
      <div class="text-muted-foreground flex-shrink-0">
        
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
</svg>
      </div>
      <span class="text-muted-foreground text-sm font-medium">
        api.ts
      </span>
    </div>

    
    <div class="flex items-center gap-2">
      
      <button
        class="toggle-linenos-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 hidden sm:inline-flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none"
        data-code-id="code-3"
        title="切换行号"
        aria-label="切换行号">
        <span class="linenumber-icon">
          
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24">
  <line x1="8" x2="21" y1="6" y2="6"/>
  <line x1="8" x2="21" y1="12" y2="12"/>
  <line x1="8" x2="21" y1="18" y2="18"/>
  <line x1="3" x2="3.01" y1="6" y2="6"/>
  <line x1="3" x2="3.01" y1="12" y2="12"/>
  <line x1="3" x2="3.01" y1="18" y2="18"/>

</svg>
        </span>
        <span class="linenumber-text hidden md:inline">行号</span>
      </button>

      <button
          class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none"
          data-code-id="code-3"
          data-default-state="expanded"
          data-collapsed="false"
          data-auto-collapse-lines="30"
          data-auto-collapse-height="400"
          data-collapsed-height="120"
          title="Collapse"
          aria-label="Collapse">
          <span class="collapse-icon">
            
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>
          </span>
          <span class="collapse-text hidden sm:inline"
            >Collapse</span
          >
        </button>
      <button
        class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none"
        data-code-id="code-3"
        title="Copy"
        aria-label="Copy">
        <span class="copy-icon">
          
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>
        </span>
        <span class="copy-text hidden sm:inline"
          >Copy</span
        >
      </button>
    </div>
  </div>

  
  <div class="code-block-content relative" id="code-3">
    <div class="highlight" filename="api.ts"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="c1">// TypeScript API
</span></span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="c1"></span><span class="kr">interface</span> <span class="nx">ApiResponse</span><span class="p">&lt;</span><span class="nt">T</span><span class="p">&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">  <span class="nx">data</span>: <span class="kt">T</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">  <span class="nx">status</span>: <span class="kt">number</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">  <span class="nx">message</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">
</span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="kr">interface</span> <span class="nx">User</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">  <span class="nx">id</span>: <span class="kt">number</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">  <span class="nx">name</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">  <span class="nx">email</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl">  <span class="nx">avatar?</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln">14</span><span class="cl">
</span></span><span class="line"><span class="ln">15</span><span class="cl"><span class="kr">class</span> <span class="nx">ApiClient</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">16</span><span class="cl">  <span class="kr">private</span> <span class="nx">baseURL</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl">  <span class="kr">private</span> <span class="nx">headers</span>: <span class="kt">Record</span><span class="p">&lt;</span><span class="nt">string</span><span class="p">,</span> <span class="na">string</span><span class="p">&gt;;</span>
</span></span><span class="line"><span class="ln">18</span><span class="cl">
</span></span><span class="line"><span class="ln">19</span><span class="cl">  <span class="kr">constructor</span><span class="p">(</span><span class="nx">baseURL</span>: <span class="kt">string</span><span class="p">,</span> <span class="nx">apiKey?</span>: <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">20</span><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">baseURL</span> <span class="o">=</span> <span class="nx">baseURL</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">21</span><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">22</span><span class="cl">      <span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln">23</span><span class="cl">      <span class="p">...(</span><span class="nx">apiKey</span> <span class="o">&amp;&amp;</span> <span class="p">{</span> <span class="s1">&#39;Authorization&#39;</span><span class="o">:</span> <span class="sb">`Bearer </span><span class="si">${</span><span class="nx">apiKey</span><span class="si">}</span><span class="sb">`</span> <span class="p">})</span>
</span></span><span class="line"><span class="ln">24</span><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="ln">25</span><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="ln">26</span><span class="cl">
</span></span><span class="line"><span class="ln">27</span><span class="cl">  <span class="kr">async</span> <span class="kr">get</span><span class="p">&lt;</span><span class="nt">T</span><span class="p">&gt;(</span><span class="nx">endpoint</span>: <span class="kt">string</span><span class="p">)</span><span class="o">:</span> <span class="nx">Promise</span><span class="p">&lt;</span><span class="nt">ApiResponse</span><span class="p">&lt;</span><span class="nt">T</span><span class="p">&gt;&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">28</span><span class="cl">    <span class="kr">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">baseURL</span><span class="si">}${</span><span class="nx">endpoint</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">29</span><span class="cl">      <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln">30</span><span class="cl">      <span class="nx">headers</span>: <span class="kt">this.headers</span><span class="p">,</span>
</span></span><span class="line"><span class="ln">31</span><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="ln">32</span><span class="cl">
</span></span><span class="line"><span class="ln">33</span><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">response</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">34</span><span class="cl">      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="sb">`HTTP error! status: </span><span class="si">${</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">35</span><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="ln">36</span><span class="cl">
</span></span><span class="line"><span class="ln">37</span><span class="cl">    <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">38</span><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="ln">39</span><span class="cl">
</span></span><span class="line"><span class="ln">40</span><span class="cl">  <span class="kr">async</span> <span class="nx">post</span><span class="p">&lt;</span><span class="nt">T</span><span class="p">&gt;(</span><span class="nx">endpoint</span>: <span class="kt">string</span><span class="p">,</span> <span class="nx">data</span>: <span class="kt">any</span><span class="p">)</span><span class="o">:</span> <span class="nx">Promise</span><span class="p">&lt;</span><span class="nt">ApiResponse</span><span class="p">&lt;</span><span class="nt">T</span><span class="p">&gt;&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">41</span><span class="cl">    <span class="kr">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">baseURL</span><span class="si">}${</span><span class="nx">endpoint</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">42</span><span class="cl">      <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln">43</span><span class="cl">      <span class="nx">headers</span>: <span class="kt">this.headers</span><span class="p">,</span>
</span></span><span class="line"><span class="ln">44</span><span class="cl">      <span class="nx">body</span>: <span class="kt">JSON.stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">),</span>
</span></span><span class="line"><span class="ln">45</span><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="ln">46</span><span class="cl">
</span></span><span class="line"><span class="ln">47</span><span class="cl">    <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">48</span><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="ln">49</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln">50</span><span class="cl">
</span></span><span class="line"><span class="ln">51</span><span class="cl"><span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ApiClient</span><span class="p">(</span><span class="s1">&#39;https://api.example.com&#39;</span><span class="p">,</span> <span class="s1">&#39;your-api-key&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">52</span><span class="cl">
</span></span><span class="line"><span class="ln">53</span><span class="cl"><span class="kr">async</span> <span class="kd">function</span> <span class="nx">getUsers</span><span class="p">()</span><span class="o">:</span> <span class="nx">Promise</span><span class="p">&lt;</span><span class="nt">User</span><span class="err">[]</span><span class="p">&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">54</span><span class="cl">  <span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">55</span><span class="cl">    <span class="kr">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="kr">get</span><span class="p">&lt;</span><span class="nt">User</span><span class="err">[]</span><span class="p">&gt;(</span><span class="s1">&#39;/users&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">56</span><span class="cl">    <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">57</span><span class="cl">  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">58</span><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Error fetching users:&#39;</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">59</span><span class="cl">    <span class="k">return</span> <span class="p">[];</span>
</span></span><span class="line"><span class="ln">60</span><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="ln">61</span><span class="cl"><span class="p">}</span></span></span></code></pre></div>
    
    <div
      class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300">
      <div
        class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">
        Click to expand and view more
      </div>
    </div>
  </div>
</div>


<script>
(function() {
  const codeId = 'code-3';
  const copyBtn = document.querySelector('.copy-code-btn[data-code-id="' + codeId + '"]');
  const collapseBtn = document.querySelector('.collapse-code-btn[data-code-id="' + codeId + '"]');
  const toggleLinenosBtn = document.querySelector('.toggle-linenos-btn[data-code-id="' + codeId + '"]');
  const codeContainer = document.getElementById(codeId);

  if (!codeContainer) return;

  
  if (toggleLinenosBtn) {
    toggleLinenosBtn.addEventListener('click', function() {
      codeContainer.classList.toggle('no-linenos');
    });
  }

  
  if (copyBtn) {
    const copyIcon = copyBtn.querySelector('.copy-icon');
    const copyText = copyBtn.querySelector('.copy-text');

    copyBtn.addEventListener('click', async function() {
      try {
        let codeText = '';
        const codeTableCell = codeContainer.querySelector('.lntd:last-child code');
        if (codeTableCell) {
          codeText = codeTableCell.textContent || codeTableCell.innerText;
        } else {
          const codeElement = codeContainer.querySelector('code');
          if (codeElement) {
            const hasInlineLineNumbers = codeElement.querySelector('.ln');
            if (hasInlineLineNumbers) {
              const codeLines = codeElement.querySelectorAll('.cl');
              if (codeLines.length > 0) {
                codeText = Array.from(codeLines)
                  .map(line => (line.textContent || line.innerText).replace(/\n+$/, ''))
                  .join('\n').replace(/\n+$/, '');
              } else {
                const allText = codeElement.textContent || codeElement.innerText;
                codeText = allText.replace(/^\d+/gm, '').replace(/^\s+/gm, '');
              }
            } else {
              codeText = codeElement.textContent || codeElement.innerText;
            }
          } else {
            codeText = codeContainer.textContent || codeContainer.innerText;
          }
        }
        codeText = codeText.trim();
        await navigator.clipboard.writeText(codeText);
        copyIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M5 13l4 4L19 7\u0022 \/\u003e\n\u003c\/svg\u003e`;
        if (copyText) copyText.textContent = 'Copied';
        copyBtn.classList.add('text-green-600');
        setTimeout(() => {
          copyIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\u0022 \/\u003e\n\u003c\/svg\u003e`;
          if (copyText) copyText.textContent = 'Copy';
          copyBtn.classList.remove('text-green-600');
        }, 2000);
      } catch (err) {
        console.error('复制失败:', err);
      }
    });
  }

  
  if (collapseBtn) {
    const collapseIcon = collapseBtn.querySelector('.collapse-icon');
    const collapseText = collapseBtn.querySelector('.collapse-text');
    const collapseOverlay = codeContainer.querySelector('.collapse-overlay');

    let codeElement = codeContainer.querySelector('pre.chroma');
    if (!codeElement) codeElement = codeContainer.querySelector('pre');

    const defaultState = collapseBtn.dataset.defaultState || 'expanded';
    const isCollapsedAttr = collapseBtn.dataset.collapsed === 'true';
    const autoCollapseLines = parseInt(collapseBtn.dataset.autoCollapseLines) || 30;
    const autoCollapseHeight = parseInt(collapseBtn.dataset.autoCollapseHeight) || 400;
    const collapsedHeight = parseInt(collapseBtn.dataset.collapsedHeight) || 120;

    let isCollapsed = false;

    function initCollapse() {
      const shouldCollapse = isCollapsedAttr || defaultState === 'collapsed' || shouldAutoCollapse();
      if (shouldCollapse) setCollapsed(true, false);
    }
    function shouldAutoCollapse() {
      if (codeElement) {
        const lines = codeElement.querySelectorAll('.line, .cl');
        const height = codeElement.offsetHeight;
        return lines.length > autoCollapseLines || height > autoCollapseHeight;
      }
      const containerHeight = codeContainer.offsetHeight;
      if (containerHeight > autoCollapseHeight) return true;
      const textContent = codeContainer.textContent || codeContainer.innerText || '';
      const estimatedLines = textContent.split('\n').length;
      return estimatedLines > autoCollapseLines;
    }
    function setCollapsed(collapsed, animate = true) {
      if (!collapseOverlay) return;
      isCollapsed = collapsed;
      if (collapsed) {
        codeContainer.style.maxHeight = collapsedHeight + 'px';
        codeContainer.style.overflow = 'hidden';
        collapseOverlay.style.opacity = '1';
        collapseOverlay.style.pointerEvents = 'auto';
        collapseIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M19 9l-7 7-7-7\u0022 \/\u003e\n\u003c\/svg\u003e`;
        if (collapseText) collapseText.textContent = 'Expand';
        collapseBtn.title = 'Expand';
      } else {
        codeContainer.style.maxHeight = '';
        codeContainer.style.overflow = '';
        collapseOverlay.style.opacity = '0';
        collapseOverlay.style.pointerEvents = 'none';
        collapseIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath fill=\u0022currentColor\u0022 d=\u0022M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z\u0022\/\u003e\u003c\/svg\u003e`;
        if (collapseText) collapseText.textContent = 'Collapse';
        collapseBtn.title = 'Collapse';
      }
      if (animate) {
        codeContainer.style.transition = 'max-height 0.3s ease-out';
        setTimeout(() => { codeContainer.style.transition = ''; }, 300);
      }
    }
    function toggleCollapse() { setCollapsed(!isCollapsed, true); }
    collapseBtn.addEventListener('click', toggleCollapse);
    if (collapseOverlay) collapseOverlay.addEventListener('click', () => { if (isCollapsed) setCollapsed(false, true); });
    initCollapse();
  }
})();
</script>

<h2 id="plain-text-codeblock">Plain Text Codeblock</h2>
<div
  class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md">
  
  <div
    class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3">
    
    <div class="flex items-center gap-2">
      <div class="text-muted-foreground flex-shrink-0">
        
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
</svg>
      </div>
      <span class="text-muted-foreground text-sm font-medium">
        PLAINTEXT
      </span>
    </div>

    
    <div class="flex items-center gap-2">
      
      <button
        class="toggle-linenos-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 hidden sm:inline-flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none"
        data-code-id="code-4"
        title="切换行号"
        aria-label="切换行号">
        <span class="linenumber-icon">
          
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24">
  <line x1="8" x2="21" y1="6" y2="6"/>
  <line x1="8" x2="21" y1="12" y2="12"/>
  <line x1="8" x2="21" y1="18" y2="18"/>
  <line x1="3" x2="3.01" y1="6" y2="6"/>
  <line x1="3" x2="3.01" y1="12" y2="12"/>
  <line x1="3" x2="3.01" y1="18" y2="18"/>

</svg>
        </span>
        <span class="linenumber-text hidden md:inline">行号</span>
      </button>

      <button
          class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none"
          data-code-id="code-4"
          data-default-state="expanded"
          data-collapsed="false"
          data-auto-collapse-lines="30"
          data-auto-collapse-height="400"
          data-collapsed-height="120"
          title="Collapse"
          aria-label="Collapse">
          <span class="collapse-icon">
            
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>
          </span>
          <span class="collapse-text hidden sm:inline"
            >Collapse</span
          >
        </button>
      <button
        class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none"
        data-code-id="code-4"
        title="Copy"
        aria-label="Copy">
        <span class="copy-icon">
          
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>
        </span>
        <span class="copy-text hidden sm:inline"
          >Copy</span
        >
      </button>
    </div>
  </div>

  
  <div class="code-block-content relative" id="code-4">
    <pre tabindex="0"><code>This is a plain text codeblock.
It should not have syntax highlighting.
You can test the copy functionality here.

function test() {
    console.log(&#34;This is a test.&#34;);
}</code></pre>
    
    <div
      class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300">
      <div
        class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">
        Click to expand and view more
      </div>
    </div>
  </div>
</div>


<script>
(function() {
  const codeId = 'code-4';
  const copyBtn = document.querySelector('.copy-code-btn[data-code-id="' + codeId + '"]');
  const collapseBtn = document.querySelector('.collapse-code-btn[data-code-id="' + codeId + '"]');
  const toggleLinenosBtn = document.querySelector('.toggle-linenos-btn[data-code-id="' + codeId + '"]');
  const codeContainer = document.getElementById(codeId);

  if (!codeContainer) return;

  
  if (toggleLinenosBtn) {
    toggleLinenosBtn.addEventListener('click', function() {
      codeContainer.classList.toggle('no-linenos');
    });
  }

  
  if (copyBtn) {
    const copyIcon = copyBtn.querySelector('.copy-icon');
    const copyText = copyBtn.querySelector('.copy-text');

    copyBtn.addEventListener('click', async function() {
      try {
        let codeText = '';
        const codeTableCell = codeContainer.querySelector('.lntd:last-child code');
        if (codeTableCell) {
          codeText = codeTableCell.textContent || codeTableCell.innerText;
        } else {
          const codeElement = codeContainer.querySelector('code');
          if (codeElement) {
            const hasInlineLineNumbers = codeElement.querySelector('.ln');
            if (hasInlineLineNumbers) {
              const codeLines = codeElement.querySelectorAll('.cl');
              if (codeLines.length > 0) {
                codeText = Array.from(codeLines)
                  .map(line => (line.textContent || line.innerText).replace(/\n+$/, ''))
                  .join('\n').replace(/\n+$/, '');
              } else {
                const allText = codeElement.textContent || codeElement.innerText;
                codeText = allText.replace(/^\d+/gm, '').replace(/^\s+/gm, '');
              }
            } else {
              codeText = codeElement.textContent || codeElement.innerText;
            }
          } else {
            codeText = codeContainer.textContent || codeContainer.innerText;
          }
        }
        codeText = codeText.trim();
        await navigator.clipboard.writeText(codeText);
        copyIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M5 13l4 4L19 7\u0022 \/\u003e\n\u003c\/svg\u003e`;
        if (copyText) copyText.textContent = 'Copied';
        copyBtn.classList.add('text-green-600');
        setTimeout(() => {
          copyIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\u0022 \/\u003e\n\u003c\/svg\u003e`;
          if (copyText) copyText.textContent = 'Copy';
          copyBtn.classList.remove('text-green-600');
        }, 2000);
      } catch (err) {
        console.error('复制失败:', err);
      }
    });
  }

  
  if (collapseBtn) {
    const collapseIcon = collapseBtn.querySelector('.collapse-icon');
    const collapseText = collapseBtn.querySelector('.collapse-text');
    const collapseOverlay = codeContainer.querySelector('.collapse-overlay');

    let codeElement = codeContainer.querySelector('pre.chroma');
    if (!codeElement) codeElement = codeContainer.querySelector('pre');

    const defaultState = collapseBtn.dataset.defaultState || 'expanded';
    const isCollapsedAttr = collapseBtn.dataset.collapsed === 'true';
    const autoCollapseLines = parseInt(collapseBtn.dataset.autoCollapseLines) || 30;
    const autoCollapseHeight = parseInt(collapseBtn.dataset.autoCollapseHeight) || 400;
    const collapsedHeight = parseInt(collapseBtn.dataset.collapsedHeight) || 120;

    let isCollapsed = false;

    function initCollapse() {
      const shouldCollapse = isCollapsedAttr || defaultState === 'collapsed' || shouldAutoCollapse();
      if (shouldCollapse) setCollapsed(true, false);
    }
    function shouldAutoCollapse() {
      if (codeElement) {
        const lines = codeElement.querySelectorAll('.line, .cl');
        const height = codeElement.offsetHeight;
        return lines.length > autoCollapseLines || height > autoCollapseHeight;
      }
      const containerHeight = codeContainer.offsetHeight;
      if (containerHeight > autoCollapseHeight) return true;
      const textContent = codeContainer.textContent || codeContainer.innerText || '';
      const estimatedLines = textContent.split('\n').length;
      return estimatedLines > autoCollapseLines;
    }
    function setCollapsed(collapsed, animate = true) {
      if (!collapseOverlay) return;
      isCollapsed = collapsed;
      if (collapsed) {
        codeContainer.style.maxHeight = collapsedHeight + 'px';
        codeContainer.style.overflow = 'hidden';
        collapseOverlay.style.opacity = '1';
        collapseOverlay.style.pointerEvents = 'auto';
        collapseIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M19 9l-7 7-7-7\u0022 \/\u003e\n\u003c\/svg\u003e`;
        if (collapseText) collapseText.textContent = 'Expand';
        collapseBtn.title = 'Expand';
      } else {
        codeContainer.style.maxHeight = '';
        codeContainer.style.overflow = '';
        collapseOverlay.style.opacity = '0';
        collapseOverlay.style.pointerEvents = 'none';
        collapseIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath fill=\u0022currentColor\u0022 d=\u0022M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z\u0022\/\u003e\u003c\/svg\u003e`;
        if (collapseText) collapseText.textContent = 'Collapse';
        collapseBtn.title = 'Collapse';
      }
      if (animate) {
        codeContainer.style.transition = 'max-height 0.3s ease-out';
        setTimeout(() => { codeContainer.style.transition = ''; }, 300);
      }
    }
    function toggleCollapse() { setCollapsed(!isCollapsed, true); }
    collapseBtn.addEventListener('click', toggleCollapse);
    if (collapseOverlay) collapseOverlay.addEventListener('click', () => { if (isCollapsed) setCollapsed(false, true); });
    initCollapse();
  }
})();
</script>

<h2 id="inline-code">Inline Code</h2>
<p>This is an inline code example：<code>const x = 42;</code> and <code>npm install</code> and <code>git commit -m &quot;update&quot;</code>.</p>
      </p>
      
    </a>
    
  </div>
</section>



<script>
document.addEventListener('DOMContentLoaded', function() {
  
  const headerElements = document.querySelectorAll('header > *');
  headerElements.forEach((element, index) => {
    element.style.opacity = '0';
    element.style.transform = 'translateY(30px)';
    
    setTimeout(() => {
      element.style.transition = 'all 0.8s cubic-bezier(0.4, 0, 0.2, 1)';
      element.style.opacity = '1';
      element.style.transform = 'translateY(0)';
    }, 200 + index * 200);
  });

  
  const contentElements = document.querySelectorAll('.prose > *');
  contentElements.forEach((element, index) => {
    element.style.opacity = '0';
    element.style.transform = 'translateY(20px)';
    
    setTimeout(() => {
      element.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
      element.style.opacity = '1';
      element.style.transform = 'translateY(0)';
    }, 1000 + index * 100);
  });

  
  const footerElements = document.querySelectorAll('footer, nav, section');
  footerElements.forEach((element, index) => {
    element.style.opacity = '0';
    element.style.transform = 'translateY(30px)';
    
    setTimeout(() => {
      element.style.transition = 'all 0.8s cubic-bezier(0.4, 0, 0.2, 1)';
      element.style.opacity = '1';
      element.style.transform = 'translateY(0)';
    }, 2000 + index * 200);
  });
});
</script>

    </main>

    
    
<footer class="relative mt-20 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl border-t border-gray-200/50 dark:border-gray-700/50">

  <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-4">
      
      
      <div class="lg:col-span-2">
        <div class="flex items-center mb-6">
          <div class="bg-gradient-to-br from-blue-500 to-purple-600 text-white w-12 h-12 rounded-2xl flex items-center justify-center text-xl font-bold mr-4">
            W
          </div>
          <div>
            <h3 class="text-xl font-bold text-gray-900 dark:text-white">Woke Soul&#39;s Blog</h3>
            <p class="text-gray-600 dark:text-gray-400 text-sm">分享技术、生活和创意</p>
          </div>
        </div>
        
        <p class="text-gray-600 dark:text-gray-300 mb-6 leading-relaxed max-w-md">
          欢迎来到我的博客世界，这里记录着我的学习历程、技术分享和生活感悟。希望我的内容能够为你带来启发和帮助。
        </p>
        
        
        
      </div>

      
      <div>
        <h4 class="text-lg font-semibold text-gray-900 dark:text-white mb-6">快速链接</h4>
        <ul class="space-y-3">
          
          <li>
            <a
              href="/about/"
              class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300 flex items-center space-x-2 group">
              <span class="text-blue-500 group-hover:scale-110 transition-transform duration-300">→</span>
              <span>About</span>
            </a>
          </li>
          
          <li>
            <a
              href="https://google.com"
              class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300 flex items-center space-x-2 group">
              <span class="text-blue-500 group-hover:scale-110 transition-transform duration-300">→</span>
              <span>Contact</span>
            </a>
          </li>
          
          <li>
            <a
              href="/index.xml"
              class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300 flex items-center space-x-2 group">
              <span class="text-blue-500 group-hover:scale-110 transition-transform duration-300">→</span>
              <span>RSS Feed</span>
            </a>
          </li>
          
        </ul>
      </div>

      
      <div>
        <h4 class="text-lg font-semibold text-gray-900 dark:text-white mb-6">联系我</h4>
        <ul class="space-y-3">
          <li class="flex items-center space-x-3 text-gray-600 dark:text-gray-400">
            <span class="text-blue-500">📧</span>
            <span>hello@example.com</span>
          </li>
          <li class="flex items-center space-x-3 text-gray-600 dark:text-gray-400">
            <span class="text-green-500">🌐</span>
            <span>https://example.com</span>
          </li>
          <li class="flex items-center space-x-3 text-gray-600 dark:text-gray-400">
            <span class="text-purple-500">📍</span>
            <span>中国</span>
          </li>
        </ul>
      </div>
    </div>

    
    <div class="border-t border-gray-200/50 dark:border-gray-700/50 mt-12 pt-8">
      <div class="flex flex-col md:flex-row justify-between items-center">
        
        <div class="text-gray-600 dark:text-gray-400 text-sm mb-4 md:mb-0">
          <p>&copy; 2025 Woke Soul&#39;s Blog. 保留所有权利。</p>
        </div>
        
        
        <div class="flex space-x-6 text-sm">
          <a href="/privacy" class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300">
            隐私政策
          </a>
          <a href="/terms" class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300">
            使用条款
          </a>
          <a href="/sitemap.xml" class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300">
            网站地图
          </a>
        </div>
      </div>
    </div>
  </div>

  
  <div class="absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
    <button 
      onclick="window.scrollTo({top: 0, behavior: 'smooth'})"
      class="group w-12 h-12 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-full shadow-lg shadow-gray-900/10 text-gray-600 dark:text-gray-300 hover:bg-white dark:hover:bg-gray-700 hover:scale-110 hover:shadow-xl transition-all duration-300">
      <span class="text-lg transform group-hover:-translate-y-1 transition-transform duration-300">↑</span>
    </button>
  </div>
</footer>


<script>
document.addEventListener('DOMContentLoaded', function() {
  const footerElements = document.querySelectorAll('footer > *');
  
  footerElements.forEach((element, index) => {
    element.style.opacity = '0';
    element.style.transform = 'translateY(30px)';
    
    setTimeout(() => {
      element.style.transition = 'all 0.8s cubic-bezier(0.4, 0, 0.2, 1)';
      element.style.opacity = '1';
      element.style.transform = 'translateY(0)';
    }, 500 + index * 200);
  });
});
</script>


    
    <script src="/js/main.js"></script>
    <script src="/js/animation-manager.js"></script>
    <script src="/js/article-cards.js"></script>
    <script src="/js/article-card-performance.js"></script>
    <script src="/js/theme-manager.js"></script>

    
    <style>
       
      body {
        background: linear-gradient(135deg, #e0f2fe 0%, #ede9fe 100%) !important;
        color: #374151;
        transition: all 0.5s ease;
        min-height: 100vh;
      }
      
      .dark body {
        background: linear-gradient(135deg, #1e293b 0%, #312e81 100%) !important;
        color: #e8e8e8;
      }


       
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }

      ::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.05);
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb {
        background: linear-gradient(45deg, #3b82f6, #8b5cf6);
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(45deg, #2563eb, #7c3aed);
      }

      .dark ::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.1);
      }

      .dark ::-webkit-scrollbar-thumb {
        background: linear-gradient(45deg, #4f46e5, #7c3aed);
      }

      .dark ::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(45deg, #4338ca, #6d28d9);
      }

       
      ::selection {
        background: rgba(59, 130, 246, 0.3);
        color: #374151;
      }
      
      ::-moz-selection {
        background: rgba(59, 130, 246, 0.3);
        color: #374151;
      }

       
      .animate-fade-in-up {
        animation: fadeInUp 0.8s ease-out forwards;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(40px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      
      .dark ::selection {
        background: rgba(139, 92, 246, 0.4);
        color: #e8e8e8;
      }
      
      .dark ::-moz-selection {
        background: rgba(139, 92, 246, 0.4);
        color: #e8e8e8;
      }

       
      main {
        background: rgba(255, 255, 255, 0.85);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-radius: 20px;
        box-shadow: 
          0 8px 32px rgba(0, 0, 0, 0.08),
          0 4px 16px rgba(0, 0, 0, 0.04),
          inset 0 1px 0 rgba(255, 255, 255, 0.8);
        border: 1px solid rgba(255, 255, 255, 0.3);
        margin: 2rem;
        padding: 2rem;
        position: relative;
        overflow: hidden;
      }

      .dark main {
        background: rgba(26, 26, 26, 0.9);
        box-shadow: 
          0 0 50px rgba(0, 0, 0, 0.3),
          0 10px 30px rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }
    </style>
  </body>
</html>

