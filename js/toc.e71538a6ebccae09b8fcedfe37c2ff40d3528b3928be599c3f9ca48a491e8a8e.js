(()=>{document.addEventListener("DOMContentLoaded",function(){let d=document.getElementById("toc-container"),i=document.getElementById("toc-nav"),e=document.getElementById("toc-toggle"),a=document.getElementById("toc-progress-bar");if(!d)return;e&&e.addEventListener("click",function(){i.classList.toggle("show");let t=this.querySelector("svg");i.classList.contains("show")?t.innerHTML='<path d="M6 18L18 6M6 6l12 12"/>':t.innerHTML='<path d="M3 12h18M3 6h18M3 18h18"/>'});let l=document.querySelectorAll("h1, h2, h3, h4, h5, h6"),r=d.querySelectorAll("nav a");if(l.length===0||r.length===0)return;function h(){let t=window.pageYOffset||document.documentElement.scrollTop,n=window.innerHeight,o=null,c=0;l.forEach((s,w)=>{let u=s.getBoundingClientRect().top+t;t>=u-100&&(o=s,c=Math.min(100,(t-u+100)/(n*.8)*100))}),r.forEach(s=>{s.classList.remove("active"),o&&s.getAttribute("href")==="#"+o.id&&s.classList.add("active")}),a&&(a.style.width=c+"%")}function g(t){let n=document.getElementById(t);if(n){let o=n.offsetTop-100;window.scrollTo({top:o,behavior:"smooth"})}}r.forEach(t=>{t.addEventListener("click",function(n){n.preventDefault();let o=this.getAttribute("href");if(o.startsWith("#")&&(g(o.substring(1)),window.innerWidth<=900&&i.classList.contains("show")&&(i.classList.remove("show"),e))){let c=e.querySelector("svg");c.innerHTML='<path d="M3 12h18M3 6h18M3 18h18"/>'}})});let f=!1;function m(){f||(requestAnimationFrame(h),f=!0)}window.addEventListener("scroll",m),h(),window.addEventListener("resize",function(){if(window.innerWidth>900&&(i.classList.remove("show"),e)){let t=e.querySelector("svg");t.innerHTML='<path d="M3 12h18M3 6h18M3 18h18"/>'}}),document.addEventListener("keydown",function(t){if(t.key==="Escape"&&i.classList.contains("show")&&(i.classList.remove("show"),e)){let n=e.querySelector("svg");n.innerHTML='<path d="M3 12h18M3 6h18M3 18h18"/>'}})});})();
